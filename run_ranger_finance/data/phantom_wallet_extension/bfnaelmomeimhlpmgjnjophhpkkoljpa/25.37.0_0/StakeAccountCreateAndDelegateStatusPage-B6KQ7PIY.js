import{a as S}from"./chunk-GQWEBF5F.js";import{e as N}from"./chunk-T5Z6UNYJ.js";import{e as z,f as H,g as B}from"./chunk-B5QR6YXS.js";import"./chunk-PRRDOZZN.js";import"./chunk-XCF46LSQ.js";import"./chunk-WSQ7DJRP.js";import"./chunk-Y5G35CJ3.js";import"./chunk-MRNT3JR7.js";import"./chunk-FTMFHTMX.js";import{N as E,Y as P}from"./chunk-E5TK5K23.js";import"./chunk-KU4NYJ65.js";import"./chunk-TZQSBP6H.js";import"./chunk-GKHH5GNI.js";import"./chunk-YTR3MBED.js";import{b as m}from"./chunk-QZM2WVGA.js";import"./chunk-XLGDZEPU.js";import{db as A}from"./chunk-NF4WCJZY.js";import{b}from"./chunk-XAXP5QQK.js";import"./chunk-JRXOTVYG.js";import"./chunk-CDGG3G3C.js";import"./chunk-XO3ZXIMS.js";import"./chunk-OKPBXZFL.js";import{$a as I}from"./chunk-LN2IIXED.js";import{cb as L,db as v}from"./chunk-GDQEBDFS.js";import"./chunk-ONXNUG5Z.js";import{U as k,Zb as C}from"./chunk-ZKZ45RUP.js";import"./chunk-SQ25X4DP.js";import{X as x,c as J,ya as g}from"./chunk-HUAJDUGD.js";import"./chunk-FURBY5ME.js";import"./chunk-JQQEIQFI.js";import"./chunk-2XAH4CUH.js";import{f as G,h as p,n as T}from"./chunk-SXSSBWAU.js";p();T();var e=G(J());var U=o=>{let s={lamports:o.lamports,votePubkey:o.votePubkey,usdPerSol:o.usdPerSol,onClose:o.onClose,validatorName:o.validatorName},{t}=x(),{createStakeAccountAndDelegateStake:c,needsLedgerApproval:d,txHash:a,confirmationStatus:l,isError:u,error:r,onDeny:i}=W(s);if(d)return e.default.createElement(H,{ledgerAction:c,cancel:i});if(u){let n=r?.message;return z(r)?e.default.createElement(B,{ledgerActionError:r,onRetryClick:c,onCancelClick:i}):e.default.createElement(m,{icon:"error",title:t("stakeAccountCreateAndDelegateStakingFailed"),onClose:i,showButton:!!a,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:g.colors.legacy.textDiminished,size:16,lineHeight:20.8},n??t("stakeAccountCreateAndDelegateErrorStaking")),e.default.createElement(S,{txHash:a},t("stakeAccountCreateAndDelegateViewTransaction")))}return l==="finalized"?e.default.createElement(m,{icon:"success",title:t("stakeAccountCreateAndDelegateSolStaked"),onClose:o.onClose,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:g.colors.legacy.textDiminished,size:16,lineHeight:20.8},e.default.createElement(b,{i18nKey:"stakeAccountCreateAndDelegateSolStakedDisclaimerInterpolated"},"Your SOL will begin earning rewards",e.default.createElement("br",null)," in the next couple of days once the stake account becomes active.")),e.default.createElement(S,{txHash:a},t("stakeAccountCreateAndDelegateViewTransaction"))):e.default.createElement(m,{icon:"loading",title:t("stakeAccountCreateAndDelegateStakingSol"),onClose:o.onClose,iconSize:"large"},e.default.createElement(A,{wordBreak:"break-word",color:g.colors.legacy.textDiminished,size:16,lineHeight:20.8},t("stakeAccountCreateAndDelegateStakingSolDisclaimerInterpolated",{validatorName:o.validatorName})),e.default.createElement(S,{txHash:a},t("stakeAccountCreateAndDelegateViewTransaction")))},Se=U,W=({onClose:o,...s})=>{let{data:t,isSuccess:c}=I(),{accountIdentifier:d,isLedgerAccount:a,solanaChainAddress:l,solanaPublicKey:u,connection:r,networkID:i}=(0,e.useMemo)(()=>{let O=t?.identifier??"",D=(t?.addresses??[]).find(q=>C.isSolanaNetworkID(q.networkID)),Q=new k.PublicKey(D?.address??""),Y=t?.type==="ledger",w=D?.networkID,j=L(v(w));return{accountIdentifier:O,isLedgerAccount:Y,solanaChainAddress:D,solanaPublicKey:Q,connection:j,networkID:w}},[t]),n=N(r),f=(0,e.useCallback)(()=>{n.mutate({...s,accountIdentifier:d,senderAddress:l,authorizedPubkey:u,votePubkey:new k.PublicKey(s.votePubkey)})},[d,s,n,l,u]),h=E(),K=(0,e.useCallback)(()=>{h.denied({chainType:"solana",chainName:"solana",networkId:C.getSolanaNetworkIDValue(i),type:"delegate"}),o()},[i,o,h]);(0,e.useEffect)(()=>{if(c){if(!t||!l)throw new Error("Selected account undefined when trying to perform stake transaction.");a||f()}},[c]);let y=n.data?.id,M=P(r,2e3,y),V=a&&(n.isIdle||n.isPending),F=M.data?.value?.confirmationStatus;return{createStakeAccountAndDelegateStake:f,onDeny:K,needsLedgerApproval:V,txHash:y,confirmationStatus:F,isError:n.isError,error:n.error}};export{U as StakeAccountCreateAndDelegateStatusPage,Se as default};
//# sourceMappingURL=StakeAccountCreateAndDelegateStatusPage-B6KQ7PIY.js.map
