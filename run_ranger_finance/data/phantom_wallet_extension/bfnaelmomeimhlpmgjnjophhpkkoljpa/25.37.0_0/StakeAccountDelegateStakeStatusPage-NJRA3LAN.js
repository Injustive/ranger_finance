import{a as V}from"./chunk-I46AIUQK.js";import{a as D}from"./chunk-GQWEBF5F.js";import{c as K}from"./chunk-T5Z6UNYJ.js";import{e as B,f as F,g as M}from"./chunk-B5QR6YXS.js";import"./chunk-PRRDOZZN.js";import"./chunk-XCF46LSQ.js";import"./chunk-WSQ7DJRP.js";import"./chunk-Y5G35CJ3.js";import"./chunk-MRNT3JR7.js";import"./chunk-FTMFHTMX.js";import{N as H,Y as _}from"./chunk-E5TK5K23.js";import"./chunk-KU4NYJ65.js";import"./chunk-TZQSBP6H.js";import"./chunk-GKHH5GNI.js";import"./chunk-YTR3MBED.js";import{b as A}from"./chunk-QZM2WVGA.js";import"./chunk-XLGDZEPU.js";import{db as f}from"./chunk-NF4WCJZY.js";import{b as I}from"./chunk-XAXP5QQK.js";import"./chunk-JRXOTVYG.js";import"./chunk-CDGG3G3C.js";import"./chunk-XO3ZXIMS.js";import"./chunk-OKPBXZFL.js";import{$a as P}from"./chunk-LN2IIXED.js";import{cb as O,db as z,n as N,o as v}from"./chunk-GDQEBDFS.js";import"./chunk-ONXNUG5Z.js";import{U as l,Zb as w}from"./chunk-ZKZ45RUP.js";import"./chunk-SQ25X4DP.js";import{X as E,c as X,ya as m}from"./chunk-HUAJDUGD.js";import"./chunk-FURBY5ME.js";import"./chunk-JQQEIQFI.js";import"./chunk-2XAH4CUH.js";import{f as W,h as x,n as L}from"./chunk-SXSSBWAU.js";x();L();var e=W(X());var Z=n=>{let i={stakePubkey:n.stakeAccountPubkey,votePubkey:n.voteAccountPubkey,onClose:n.onClose},{t}=E(),{delegateStake:s,onDeny:r,needsLedgerApproval:u,txHash:a,confirmationStatus:c,isError:k,error:d}=$(i);if(u)return e.default.createElement(F,{ledgerAction:s,cancel:r});if(k){let o=d,S=o?.message,g=B(o),p=o?.message.includes(v),C=o?.message.includes(N);return g?e.default.createElement(M,{ledgerActionError:o,onRetryClick:s,onCancelClick:r}):p||C?e.default.createElement(V,{onCancelClick:r}):e.default.createElement(A,{icon:"error",title:t("stakeAccountDelegateStakeStakingFailed"),onClose:r,showButton:!!a,iconSize:"large"},e.default.createElement(f,{wordBreak:"break-word",color:m.colors.legacy.textDiminished,size:16,lineHeight:20.8},S??t("stakeAccountDelegateStakeStakingFailedDescription")),e.default.createElement(D,{txHash:a},t("stakeAccountDelegateStakeViewTransaction")))}return c==="confirmed"||c==="finalized"?e.default.createElement(A,{icon:"success",title:t("stakeAccountDelegateStakeSolStaked"),onClose:n.onClose,iconSize:"large"},e.default.createElement(f,{wordBreak:"break-word",color:m.colors.legacy.textDiminished,size:16,lineHeight:20.8},e.default.createElement(I,{i18nKey:"stakeAccountDelegateStakeSolStakedDescriptionInterpolated"},"Your SOL will begin earning rewards",e.default.createElement("br",null)," in the next couple of days once the stake account becomes active.")),e.default.createElement(D,{txHash:a},t("stakeAccountDelegateStakeViewTransaction"))):e.default.createElement(A,{icon:"loading",title:t("stakeAccountDelegateStakeStakingSol"),onClose:n.onClose,iconSize:"large"},e.default.createElement(f,{wordBreak:"break-word",color:m.colors.legacy.textDiminished,size:16,lineHeight:20.8},t("stakeAccountDelegateStakeStakingSolDescription")),e.default.createElement(D,{txHash:a},t("stakeAccountDelegateStakeViewTransaction")))},ye=Z,$=({onClose:n,...i})=>{let{data:t,isSuccess:s}=P(),{accountIdentifier:r,isLedgerAccount:u,solanaChainAddress:a,solanaPublicKey:c,connection:k,networkID:d}=(0,e.useMemo)(()=>{let Y=t?.identifier??"",h=(t?.addresses??[]).find(J=>w.isSolanaNetworkID(J.networkID)),j=new l.PublicKey(h?.address??""),q=t?.type==="ledger",b=h?.networkID,G=O(z(b));return{accountIdentifier:Y,isLedgerAccount:q,solanaChainAddress:h,solanaPublicKey:j,connection:G,networkID:b}},[t]),o=K(k),S=(0,e.useCallback)(()=>{o.mutate({...i,accountIdentifier:r,senderAddress:a,stakePubkey:new l.PublicKey(i.stakePubkey),authorizedPubkey:c,votePubkey:new l.PublicKey(i.votePubkey)})},[r,i,o,a,c]),g=H(),p=(0,e.useCallback)(()=>{g.denied({chainType:"solana",chainName:"solana",networkId:w.getSolanaNetworkIDValue(d),type:"delegate"}),n()},[d,n,g]);(0,e.useEffect)(()=>{s&&!u&&S()},[s]);let T=o.data?.id,y=_(k,2e3,T),Q=u&&(o.isIdle||o.isPending),U=y.data?.value?.confirmationStatus;return{delegateStake:S,onDeny:p,needsLedgerApproval:Q,txHash:T,confirmationStatus:U,isError:o.isError||y.isError,error:o.error||y.error}};export{Z as StakeAccountDelegateStakeStatusPage,ye as default};
//# sourceMappingURL=StakeAccountDelegateStakeStatusPage-NJRA3LAN.js.map
