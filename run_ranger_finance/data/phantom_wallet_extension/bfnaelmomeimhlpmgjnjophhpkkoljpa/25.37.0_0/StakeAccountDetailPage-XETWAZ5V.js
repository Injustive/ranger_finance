import{a as _t}from"./chunk-FCCFWYLX.js";import"./chunk-PGELIEBP.js";import"./chunk-W3L4NJ2F.js";import{a as Ht}from"./chunk-FX5HHNJI.js";import"./chunk-4QKXPLD7.js";import"./chunk-YHBVYGVK.js";import{b as Ot,d as v}from"./chunk-5PSMATJ6.js";import"./chunk-GAZ6S2JL.js";import{o as Ft,p as Mt}from"./chunk-BRNBO5CW.js";import{b as zt}from"./chunk-NOEGQPO4.js";import"./chunk-ZOSQCFZI.js";import"./chunk-S2U2M74Z.js";import"./chunk-GQWEBF5F.js";import"./chunk-T5Z6UNYJ.js";import"./chunk-B5QR6YXS.js";import"./chunk-PRRDOZZN.js";import"./chunk-WJGU35II.js";import"./chunk-NHAVVXOV.js";import"./chunk-2BZYLIYT.js";import"./chunk-VGSD3HGK.js";import{g as Et,k as T}from"./chunk-XCF46LSQ.js";import"./chunk-WSQ7DJRP.js";import"./chunk-Y5G35CJ3.js";import"./chunk-GWN4TKCT.js";import"./chunk-ME2M2M3E.js";import"./chunk-VFRN3JHE.js";import"./chunk-MRNT3JR7.js";import"./chunk-FTMFHTMX.js";import"./chunk-G7SUPDIB.js";import"./chunk-NF3CQLHB.js";import"./chunk-JHOWMCAF.js";import"./chunk-MTFI7Z6Z.js";import{$ as Wt,C as xt,I as bt,J as Dt,R as Pt,S as Tt,W as Bt,_ as Ut,ca as It,ja as Vt,ka as Lt,z as _}from"./chunk-E5TK5K23.js";import"./chunk-KU4NYJ65.js";import{Da as yt,s as ft}from"./chunk-TZQSBP6H.js";import"./chunk-GKHH5GNI.js";import"./chunk-MGZWMRRY.js";import"./chunk-J4EMQFBO.js";import{na as wt,qa as ht}from"./chunk-YTR3MBED.js";import"./chunk-FF2UM7NZ.js";import"./chunk-KDUIOG25.js";import"./chunk-QZM2WVGA.js";import"./chunk-4APBQPA6.js";import{a as Nt}from"./chunk-XLGDZEPU.js";import{db as i,m as c}from"./chunk-NF4WCJZY.js";import"./chunk-7XT6ZBFT.js";import"./chunk-6T44YMNA.js";import{b as St}from"./chunk-XAXP5QQK.js";import{c as H}from"./chunk-JRXOTVYG.js";import"./chunk-CDGG3G3C.js";import"./chunk-VQ7QS3TU.js";import"./chunk-627GUZ7R.js";import{Y as vt,Z as At}from"./chunk-XO3ZXIMS.js";import"./chunk-OKPBXZFL.js";import{$a as kt,y as M}from"./chunk-LN2IIXED.js";import{cb as gt,db as Ct}from"./chunk-GDQEBDFS.js";import"./chunk-ONXNUG5Z.js";import{Gc as F,Zb as ut,sc as dt}from"./chunk-ZKZ45RUP.js";import{R as lt}from"./chunk-SQ25X4DP.js";import{Ca as mt,Da as pt,X as C,bb as k,c as ct,ya as s}from"./chunk-HUAJDUGD.js";import"./chunk-FURBY5ME.js";import"./chunk-JQQEIQFI.js";import"./chunk-2XAH4CUH.js";import{f as st,h as D,n as P}from"./chunk-SXSSBWAU.js";D();P();var t=st(ct());D();P();var p=st(ct());var ie=c.div`
  display: grid;
  grid-template-columns: 100%;
  grid-template-rows: 47px auto;
  align-items: center;
  justify-content: flex-start;
  background: ${s.colors.legacy.elementBase};
  width: 328px;
  border-radius: 6px;
  margin-top: 24px;
`,re=c.div`
  display: grid;
  gap: 10px;
  grid-template-columns: 33px 1fr auto;
  align-items: center;
  padding: 9px 14px;
  border-bottom: 1px solid ${s.colors.legacy.areaBase};
`,se=c(Ot)``,ce=c.section`
  padding: 14px;
`,le=c.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  height: 30px;
  align-items: center;
`,ue=c(i)`
  color: ${a=>a.activationState==="active"?s.colors.legacy.spotPositive:a.activationState==="inactive"?s.colors.legacy.spotNegative:a.activationState==="activating"?s.colors.brand.yellowMoon:a.activationState==="deactivating"?s.colors.brand.yellowMoon:s.colors.legacy.textDiminished};
`,de=c(Ht).attrs(()=>({tooltipAlignment:"bottomCenter",iconSize:12,lineHeight:17,fontWeight:400,fontSize:14,noWrap:!0}))``,K=a=>{let{t:e}=C(),{data:u}=Bt(a.validatorKeybaseUsername),d=a.validatorName??a.validatorKeybaseUsername??a.voteAccountPubkey??a.stakeAccountPubkey;return p.default.createElement(ie,null,p.default.createElement(re,null,p.default.createElement(se,{width:28,iconUrl:a.validatorIconUrl??u}),p.default.createElement(i,{textAlign:"left",weight:600,size:16,noWrap:!0},d),p.default.createElement(ue,{activationState:a.status,textAlign:"right",weight:400,size:14,noWrap:!0,textTransform:"capitalize"},a.status??"")),p.default.createElement(ce,null,Object.entries(a.data).map(([r,n])=>p.default.createElement(le,{key:r,onClick:n.onClick},p.default.createElement(de,{info:n.tooltip?p.default.createElement(Mt,null,p.default.createElement(Ft,null,n.tooltip)):null},r==="Stake Account"?e("stakeAccountCardStakeAccount"):"",r==="Balance"?e("stakeAccountCardBalance"):"",r==="Rent Reserve"?e("stakeAccountCardRentReserve"):"",r==="Active Stake"?e("stakeAccountCardActiveStake"):"",r==="Lockup"?e("stakeAccountCardLockup"):"",r==="Rewards"?e("stakeAccountCardRewards"):""),n.node))))};var B=c.div`
  position: relative;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow-y: scroll;
`,U=c.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-grow: 1;
`,j=c.a.attrs({target:"_blank",rel:"noopener noreferrer"})`
  color: ${s.colors.legacy.spotBase};
  text-decoration: none;
  cursor: pointer;
`,x=c.section`
  display: flex;
  gap: 15px;
`,Kt=c.section`
  display: flex;
  gap: 15px;
  margin-top: 24px;
  flex-direction: column;
`,ke=c.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
`,me=5e3,pe=a=>{let{t:e}=C(),{showStakeAccountDeactivateStakeStatusModal:u,showStakeAccountDelegateStakeStatusModal:d,showStakeAccountWithdrawStakeStatusModal:r,closeAllModals:n}=zt(),{data:S}=kt(),A=(0,t.useMemo)(()=>S?.addresses.find(h=>ut.isSolanaNetworkID(h.networkID)),[S]),{solanaPublicKey:b,connection:g,networkID:Q}=(0,t.useMemo)(()=>{let h=A?.address??"",rt=A?.networkID,ne=gt(Ct(rt));return{solanaPublicKey:h,connection:ne,networkID:rt}},[A]),$=It(wt),$t=dt("solana"),{data:qt}=ft({query:{data:$t}}),{data:q}=yt(),W=qt?.usd,f=Ut(g,b),o=f.data?.find(h=>h.pubkey===a.stakeAccountPubkey),I=o?.info.meta.authorized.staker,Yt=o?.lamports??0,Y=parseFloat(o?.info.meta.rentExemptReserve??"0"),Gt=!!o?.inflationReward,{data:Jt=Y}=ht(A),V=!!(q&&new lt(q.totalQuantityString).gt(Jt+me)),G=Vt(),l=Wt(g,o?.pubkey).data,Xt=l?.active??0,Zt=l?.inactive??0,L=Yt-Y-Xt,J=o?.info.stake?.delegation.voter,Rt=Se(g),m=J?Rt.get(J):void 0,X=new Date((o?.info.meta.lockup?.unixTimestamp??0)*1e3),N=Tt(o),z=Dt(l?.state)&&V,E=bt(l?.state)&&!N&&V,te=F("enable-psol-native-convert"),Z=F("enable-psol-native-delayed-convert"),y=$&&te&&E,w=$&&Z&&z,R=Z&&l?.state==="deactivating",{data:ee}=vt(Q),{data:tt}=At(Q,o?.pubkey??""),{pushDetailView:et}=Et(),oe=(0,t.useCallback)(()=>{et(t.default.createElement(_t,null))},[et]),ot=Lt(oe),nt=(0,t.useCallback)(()=>{if(!o)throw new Error("Stake account not found");ot({stakeAccount:o,validatorName:m?.info?.name??"",activationState:l?.state})},[ot,o,m,l]),O=[{key:"viewOnExplorer",label:e("stakeAccountViewViewOnExplorer",{explorer:ee}),onClick:()=>{tt&&self.open(tt,"_blank")}}];o&&(m&&(l?.state==="inactive"||l?.state==="deactivating")&&O.push({key:"restake",label:e("stakeAccountViewRestake"),onClick:()=>{d({stakeAccountPubkey:o.pubkey,voteAccountPubkey:m?.voteAccountPubkey,lamports:l.inactive,onClose:n})}}),L>0&&L>Zt&&O.push({key:"withdrawUnstakedSOL",label:e("stakeAccountViewWithdrawUnstakedSOL"),onClick:()=>{r({stakeAccountPubkey:o.pubkey,amount:L,usdPerSol:W,onClose:n})}}));let at=(0,t.useCallback)(()=>{!o||!I||u({stakeAccountPubkey:o.pubkey,stakeAuthorityPubkey:I,onClose:n})},[o,I,u,n]),it=(0,t.useCallback)(()=>{o&&r({stakeAccountPubkey:o.pubkey,amount:o.lamports,usdPerSol:W,onClose:n})},[o,r,W,n]);return f.isPending?t.default.createElement(B,null,t.default.createElement(Nt,null)):f.isError?t.default.createElement(B,null,t.default.createElement(T,null,e("stakeAccountViewPrimaryText")),t.default.createElement(U,null,t.default.createElement(i,{size:16,color:s.colors.legacy.textDiminished,lineHeight:20},f.error?.message??e("stakeAccountViewError"))),t.default.createElement(x,null,t.default.createElement(k,{onClick:n},e("commandClose")))):f.isSuccess&&o?t.default.createElement(B,{canConvertStake:y,canConvertDelayedStake:w},t.default.createElement(T,{items:O},e("stakeAccountViewPrimaryText")),m?t.default.createElement(t.default.Fragment,null,t.default.createElement(U,null,t.default.createElement(jt,{canConvertStake:y,canConvertDelayedStake:w,hasValidator:!!m,durationUntilEpochEnds:G,isDeactivating:R}),t.default.createElement(K,{stakeAccountPubkey:o.pubkey,voteAccountPubkey:m?.voteAccountPubkey,validatorName:m?.info?.name,validatorKeybaseUsername:m?.info?.keybaseUsername,validatorIconUrl:m?.info?.iconUrl,status:l?.state,data:{"Stake Account":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},M(o.pubkey))},Balance:{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,o.lamports))},"Rent Reserve":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,o.info.meta.rentExemptReserve))},"Active Stake":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,l?.active))},Lockup:{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},N?H(X):"\u2013")},Rewards:Gt?{node:t.default.createElement(ke,null,t.default.createElement(i,{color:s.colors.legacy.spotPositive,textAlign:"right",weight:500,size:14,noWrap:!0},"+",t.default.createElement(v,null,o?.inflationReward))),tooltip:e("stakeAccountCardRewardsTooltip")}:{node:t.default.createElement(i,{color:s.colors.legacy.textDiminished,textAlign:"right",weight:500,size:14,noWrap:!0},"\u2013")}}}),V?null:t.default.createElement(mt,{marginY:"base"},t.default.createElement(pt,{color:"spotNegative",children:e("stakeAccountInsufficientFunds")}))),t.default.createElement(Qt,{canConvertStake:y,canUnstake:z,canWithdrawStake:E,canConvertDelayedStake:w,onClose:n,onUnstake:at,onWithdrawStake:it,onConvertStake:nt})):t.default.createElement(t.default.Fragment,null,t.default.createElement(U,null,t.default.createElement(jt,{canConvertStake:y,canConvertDelayedStake:w,hasValidator:!!m,durationUntilEpochEnds:G,isDeactivating:R}),t.default.createElement(K,{stakeAccountPubkey:o.pubkey,status:l?.state,data:{"Stake Account":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},M(o.pubkey))},Balance:{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,o.lamports))},"Rent Reserve":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,o.info.meta.rentExemptReserve))},"Active Stake":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,l?.active))},Lockup:{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},N?H(X):"\u2013")}}})),t.default.createElement(Qt,{canUnstake:z,canWithdrawStake:E,canConvertStake:y,canConvertDelayedStake:w,onClose:n,onUnstake:at,onWithdrawStake:it,onConvertStake:nt}))):t.default.createElement(B,null,t.default.createElement(T,null,e("stakeAccountViewPrimaryText")),t.default.createElement(U,null,t.default.createElement(i,{size:16,color:s.colors.legacy.textDiminished,lineHeight:20},e("stakeAccountViewStakeNotFound"))),t.default.createElement(x,null,t.default.createElement(k,{onClick:n},e("commandClose"))))},to=pe,jt=({canConvertStake:a,canConvertDelayedStake:e,isDeactivating:u,hasValidator:d,durationUntilEpochEnds:r})=>{let{t:n}=C(),S=(0,t.useMemo)(()=>a?t.default.createElement(t.default.Fragment,null,n("stakeAccountViewStakeInactiveToPSOL.part1")," ",t.default.createElement(j,{href:xt},n("stakeAccountViewStakeInactiveToPSOL.part2"))):u?n("stakeAccountViewStakeDeactivatingToPSOL",{durationUntilEpochEnds:r}):e?n("convertToPSOLDelayDisclaimer",{durationUntilEpochEnds:r}):d?t.default.createElement(St,{i18nKey:"stakeAccountViewSOLCurrentlyStakedInterpolated"},"Your SOL is currently staked with a validator. You'll need to unstake to ",t.default.createElement("br",null),"access these funds. ",t.default.createElement(j,{href:_},"Learn more")):t.default.createElement(t.default.Fragment,null,n("stakeAccountViewStakeInactive.part1")," ",t.default.createElement(j,{href:_},n("stakeAccountViewStakeInactive.part2"))),[a,e,u,d,r,n]);return t.default.createElement(i,{size:16,color:s.colors.legacy.textDiminished,lineHeight:20},S)},Qt=a=>{let{t:e}=C(),{canUnstake:u,canWithdrawStake:d,canConvertStake:r,canConvertDelayedStake:n,onClose:S,onUnstake:A,onWithdrawStake:b,onConvertStake:g}=a;return r?t.default.createElement(Kt,null,t.default.createElement(k,{background:"spot",onClick:g},e("convertToPhantomLST")),t.default.createElement(x,null,t.default.createElement(k,{onClick:S},e("commandClose")),t.default.createElement(k,{onClick:b},e("stakeAccountViewWithdrawStake")))):n?t.default.createElement(Kt,null,t.default.createElement(k,{background:"spot",onClick:g},e("convertToPhantomLST")),t.default.createElement(x,null,t.default.createElement(k,{onClick:S},e("commandClose")),t.default.createElement(k,{onClick:A},e("stakeAccountViewActionButtonUnstake")))):t.default.createElement(x,null,t.default.createElement(k,{onClick:S},e("commandClose")),d&&t.default.createElement(k,{onClick:b},e("stakeAccountViewWithdrawStake")),u&&t.default.createElement(k,{background:"spot",onClick:A},e("stakeAccountViewActionButtonUnstake")))},Se=a=>{let e=Pt(a),u=e.results??[],d=(0,t.useRef)(u);return d.current=u,(0,t.useMemo)(()=>new Map(d.current.map(n=>[n.voteAccountPubkey,n])),[e.dataUpdatedAt,d])};export{pe as StakeAccountDetailPage,to as default};
//# sourceMappingURL=StakeAccountDetailPage-XETWAZ5V.js.map
