import{a as gn}from"./chunk-MTFI7Z6Z.js";import{B as ma,M as fa,P as ha,Q as ba,R as ya,U as ga,a as Qs,la as Sa,s as ca,v as ua,x as da,y as pa}from"./chunk-TZQSBP6H.js";import{C as et,D as Tr,E as xo,F as sa,I as xr,J as aa,K as vo,N as vr,O as bn,P as la,Y as yn,Z as Ca,fa as wa,p as ra,r as ia,u as To,v as hn,y as oo,ya as Ta}from"./chunk-YTR3MBED.js";import{f as Es,h as Ps,n as ks,oa as Us}from"./chunk-XO3ZXIMS.js";import{$a as Jo,Rb as Zo,Vb as Qe,Yb as en,fb as Is,k as Xt,tb as As}from"./chunk-LN2IIXED.js";import{$ as Ls,$b as pn,Ac as ea,Ba as Yt,Bc as ta,C as Bs,Ca as W,D as Ms,Da as an,Db as un,E as on,Ea as So,Eb as dn,F as gr,Fa as A,G as Ds,Ga as Sr,H as nn,Ha as Jt,Ia as Zt,Ja as E,K as Rs,Ka as _,La as ht,Ma as q,N as rn,Na as w,O as Cr,Oa as ue,Pa as eo,Qa as k,Qb as Fs,R as Ns,Ra as ln,Sa as le,Ta as Je,Ua as z,Va as F,Xb as _u,Yb as $s,Zb as zs,_a as to,_b as Hs,aa as Vs,ab as wo,ba as sn,bb as Ze,cb as _s,db as js,dc as Gs,ec as qs,hc as Ws,ic as Ks,lc as mn,mb as cn,mc as Xs,nc as Ys,pc as fn,rc as Js,ub as wr,uc as Zs,v as tn,y as Ut,z as Os}from"./chunk-GDQEBDFS.js";import{a as vs,e as oa,i as na}from"./chunk-ONXNUG5Z.js";import{Da as Qo,Fa as Qt,G as yr,Pc as X,Pd as Vu,Q as ms,Qb as ys,Rd as re,Sb as Xo,T as Ae,U,Zb as D,_ as he,_b as gs,_c as oe,_d as Z,ba as fs,ca as ft,gc as Cs,jd as se,k as Nu,ka as hs,ld as Re,mc as Ss,od as ne,rc as Yo,sc as ws,wc as Ts,xc as xs,ya as bs,z as Lu}from"./chunk-ZKZ45RUP.js";import{R as kt,S as pe,u as mt}from"./chunk-SQ25X4DP.js";import{S as Ee,X as Y,c as P,l as b,n as Ko}from"./chunk-HUAJDUGD.js";import{f as x,h as s,l as ps,m as Buffer,n as a}from"./chunk-SXSSBWAU.js";s();a();s();a();var Cn=x(Nu(),1);var va=x(Lu(),1);var xa=(0,Cn.struct)([(0,Cn.u8)("instruction"),Gs("amount")]);function Ia(t,e,o,n,r=[],i=pn){let l=Ws([{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],o,r),c=Buffer.alloc(xa.span);return xa.encode({instruction:qs.Burn,amount:BigInt(n)},c),new va.TransactionInstruction({keys:l,programId:i,data:c})}s();a();var we=t=>{if(t!=null&&!(t.constructor===Object&&Object.keys(t).length===0))return t};var ju=t=>t??[],Ue=class extends Error{constructor(e){super(e),this.name="CollectiblesError"}},j=b.string().nullish().transform(we),Ot=b.number().nullish().transform(we),Ir=b.union([j,Ot]).transform(t=>typeof t=="number"?t.toString():t),Fu=b.object({name:j,symbol:j,decimals:Ot,address:j}),Sn=(y=>(y[y.Uninitialized=0]="Uninitialized",y[y.EditionV1=1]="EditionV1",y[y.MasterEditionV1=2]="MasterEditionV1",y[y.ReservationListV1=3]="ReservationListV1",y[y.MetadataV1=4]="MetadataV1",y[y.ReservationListV2=5]="ReservationListV2",y[y.MasterEditionV2=6]="MasterEditionV2",y[y.EditionMarker=7]="EditionMarker",y[y.UseAuthorityRecord=8]="UseAuthorityRecord",y[y.CollectionAuthorityRecord=9]="CollectionAuthorityRecord",y[y.TokenOwnedEscrow=10]="TokenOwnedEscrow",y[y.TokenRecord=11]="TokenRecord",y[y.MetadataDelegate=12]="MetadataDelegate",y))(Sn||{}),Ao=b.nativeEnum(Sn),Aa=b.object({price:b.number(),token:Fu.nullish().transform(we)}),$u=Aa.nullish().transform(we),zu=b.object({name:j,url:j,isVerified:b.coerce.boolean()}),Ar=b.object({id:b.string(),isValidCollectionId:b.coerce.boolean(),name:j,description:j,externalUrl:j,imageUrl:j,isSpam:b.coerce.boolean(),spamStatus:b.nativeEnum(oo).optional().default("NOT_VERIFIED"),floorPrice:Aa.nullish().transform(we),ownerCount:Ot,totalCount:Ot,tokenCount:Ot,marketplaces:b.array(zu)}),Hu=b.object({small:j,medium:j,large:j,blurhash:j}),Gu=Hu.nullish().transform(we),Ea=b.enum(["image","video","audio","model","other"]),qu=b.object({url:j}),Io=qu.nullish().transform(we),Wu=b.object({type:Ea,image:Io,video:Io,audio:Io,model:Io,other:Io,previews:Gu}),Ku=Wu.nullish().transform(we),Qu=b.object({trait_type:j,value:j.or(Ot),display_type:j}),Xu=b.object({id:b.string(),contract:b.string(),standard:b.nativeEnum(hn)}),Er=b.object({compressed:b.boolean(),merkleTree:b.string(),leafIndex:b.number()}),Yu=b.object({mint:b.string(),tokenAccount:b.string(),standard:b.nativeEnum(To),compression:Er.nullish().transform(we),programId:b.string(),mintExtensions:ra(ia).optional()}),Pa=b.object({id:b.string(),url:b.string(),displayName:b.string(),description:b.string(),count:b.number()}),Ju=b.object({hash:b.string(),index:b.number(),distinctRareSats:b.number(),satributes:b.array(Pa),blockNumber:b.number(),value:b.number(),backgroundImageUrl:b.string()}),Zu=b.object({firstCreatedTransactionHash:b.string(),firstCreatedInscriptionId:b.string(),inscriptionId:j,inscriptionNumber:Ir,outputValue:Ir,satNumber:Ir,satName:j,satRarity:j,protocolName:j,utxoHash:j,utxoIndex:Ot,createdAt:b.string().nullish().transform(we),utxoDetails:Ju.nullish().transform(we)}),ed=b.object({objectId:b.string().optional(),kioskId:b.string().optional()}),td=b.object({listingPrice:b.string(),listingPriceUiAmount:b.string(),isNative:b.boolean(),url:b.string()}),ka=b.union([Yu,Xu,Zu,ed]),wn=b.object({id:gs,chain:Ss,name:j,symbol:j,description:j,externalUrl:j,collection:Ar,media:Ku,uri:j,attributes:b.array(Qu).nullish().transform(ju),lastSalePrice:$u,balance:j,decimals:j,owner:j,chainData:ka.optional(),listings:b.record(td).nullish().transform(we)}),Ua=Ar.extend({items:b.array(wn)}),ab=b.object({items:b.array(Ua),isTrimmed:b.boolean()});var lb=b.object({compression:Er.nullish().transform(we).refine(t=>t?.compressed),mint:b.string()}),cb=b.object({root:b.string(),proof:b.array(b.string()),merkleTree:b.string(),dataHash:b.string(),creatorHash:b.string(),leafIndex:b.number(),owner:b.string(),delegate:b.string().optional()});s();a();s();a();var Pr=x(ps());s();a();var od=new U.PublicKey("NTYeYJ1wr4bpM5xo6zx5En44SvJFAd35zTxxNoERYqd"),fb=new U.PublicKey("M2mx93ekt1fmXSVkTrUL9xVFHkmME8HTUi5Cyc5aF7K");function no(t){let e=[2,6],o=Ao.safeParse(t);return o.success&&e.includes(o.data)}var kr=Pr.Buffer.from("metadata"),nd=Pr.Buffer.from("edition"),Ur=Ut.toBuffer();function Or(t){let[e]=U.PublicKey.findProgramAddressSync([kr,Ur,t],Ut);return e}function Eo(t){let[e]=U.PublicKey.findProgramAddressSync([kr,Ur,t,nd],Ut);return e}function Br(t){let[e]=U.PublicKey.findProgramAddressSync([kr,Ur,t],Ut);return e}var rd="CollectibleEdition";function id(t,e){return ne({queryKey:[rd,{mintAddress:t}],async queryFn(){if(!e)return{};let o=Buffer.from(new U.PublicKey(t).toBytes()),n=Eo(o),{Edition:r}=await on();try{let i=await r.fromAccountAddress(e,n),l=Ao.safeParse(i.key);if(!l.success)throw new Error(`Invalid MetaplexTokenEdition: ${i.key}`);return{key:l.data,isMasterEdition:no(i.key)}}catch{return{key:void 0,isMasterEdition:void 0}}}})}s();a();function K(t){return t?.tokenAccount!==void 0}function Te(t){return t?.contract!==void 0}function Ne(t){return t!==void 0&&"firstCreatedTransactionHash"in t}function Tn(t){return t!==void 0&&"objectId"in t}function Oa(t){return t!==void 0&&"outputValue"in t&&"utxoHash"in t&&"utxoIndex"in t}function Bt(t){return t!==void 0&&"utxoDetails"in t}s();a();var Le=x(P());s();a();s();a();var Oe="collectibles",Mr=[Oe,"collectibleBids"],B={collections:t=>[Oe,"collections",{addresses:t.map(wr)}],hiddenCollections:t=>[Oe,"hiddenCollections",t],unhiddenCollections:t=>[Oe,"unhiddenCollections",t],visibilityOverrides:t=>[Oe,"visibilityOverrides",t],pinnedCollections:t=>[Oe,"pinnedCollections",t],topCollections:t=>[Oe,"topCollections",{addresses:t.map(wr)}],optimisticUpdates:()=>[Oe,"optimisticUpdates"],collectibleBids:t=>[...Mr,t],collectibleMintGasEstimation:t=>[Oe,"mintNFTGasEstimation",t],collectibleSellSteps:t=>[Oe,"collectibleSellSteps",t],createMintTransaction:t=>[Oe,"createMintTransaction",t],transferTransaction:t=>[Oe,"transferTransaction",t]};var xn=(t,e)=>{t.invalidateQueries({queryKey:Mr}),t.invalidateQueries({predicate:({queryKey:o})=>o.includes("collectibleSellSteps")&&o[2].details.orderId===e?.orderId})};s();a();var sd=20;function ro(t,e){let o=B.optimisticUpdates(),n=t.getQueryData(o)??[];t.setQueryData(o,[...n,e])}async function Ba(t,e){let o=B.optimisticUpdates(),n=await t.getQueryState(o);if(n){let r=e??Date.now(),i=n.dataUpdatedAt,l=re({seconds:sd});return r-i>l?(t.removeQueries({queryKey:o}),[]):n?.data??[]}else return[]}function Ma(t,e){let o=e.reduce((n,r)=>{let{id:i,amount:l}=r,c=new pe(l);return n[i]=(n[i]??new pe(0)).plus(c),n},{});for(let n of t)n.items=n.items.reduce((r,i)=>{let l=i.id,c=o[l];if(c){let d=new pe(i.balance??0);return d.minus(c).isGreaterThan(0)?r.concat({...i,balance:d.minus(c).toString()}):r}else return r.concat(i)},[]);return t=t.filter(n=>n.items.length>0),t}var ld=()=>{let{data:t}=Jo();return(0,Le.useMemo)(()=>{let o=t?.identifier??"",n=t?.type==="ledger",r=t?.addresses??[],i=r.find(Cs),l=i?.networkID,c=i?.address??"",d=js(l),p=_s(d);return{accountIdentifier:o,chainAddresses:r,chainId:l,solanaPublicKey:c,isLedger:n,cluster:d,connection:p}},[t])},cd=(t,e)=>{let[o,n]=(0,Le.useState)(void 0);return(0,Le.useEffect)(()=>{(async()=>{if(!t)return;let l=t.find(m=>m.type==="transaction")?.data?.transaction;if(!l)return;let c=yr(l,"base64"),d=await fn(e,[c.message]),p=ms(d.value);n(p)})()},[t,e]),o},ud=async(t,e,o,n,r,i)=>{if(!i)throw new Error("Bid summary is required");let{collectionName:l,marketplace:c,receiveAmount:d,currencySymbol:p}=i,m={topRight:{text:`+${d} ${p}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${l}`},bottomLeft:{text:en(c)}},{data:h,chainId:g,type:y}=e,{transaction:C}=h,S=yr(C,"base64"),v={ownerAddress:o.solanaPublicKey,networkID:g,data:{signature:""},type:"sell",display:{summary:m}},{accountIdentifier:O,solanaPublicKey:V,connection:I}=o,$=new U.PublicKey(V),J=await Zs({accountIdentifier:O,feePayer:$,transaction:S,pendingTransactionInput:v,connection:I,accountSigner:n,storage:r,opts:{skipPreflight:!0}});return{type:y,data:J}},dd="Steps are required",Dr="These steps are not from the same bid",vn=class extends Error{message=dd},In=class extends Error{message=Dr},pd=(t,e,o,n)=>{let r=oe(),i=Z(),l=se(),c=Xt(),[d,p]=(0,Le.useState)("idle"),[m,h]=(0,Le.useState)(null),[g,y]=(0,Le.useState)(null),{t:C}=Y(),S=ld(),{chainId:v,connection:O,chainAddresses:V,isLedger:I}=S,$=v&&D.isSolanaNetworkID(v)?v:Qt.Solana.Mainnet,J=cd(e,$);(0,Le.useEffect)(function(){d==="loading"&&xn(l,o)},[d,l,o]),(0,Le.useEffect)(function(){d==="success"&&o&&ro(l,{id:o.collectibleId,amount:1})},[d,l,V,o]);let ct=()=>{p("idle"),h(null),y(null)},te=n&&o?.receiveAmount?o.receiveAmount*n:void 0;return{executeSellSolanaSteps:async()=>{try{if(t&&t!==o?.orderId)throw new In;if(!Array.isArray(e)||e.length===0)throw new vn;p("loading");for await(let ie of e){let ut=await ud(C,ie,S,c,r,o);y(ut.data),await Js({connection:O,signature:ut.data})}p("success"),i.capture("collectibleSellSuccess",{data:{bidSummary:o,usdSaleValue:te}})}catch(ie){let ut=ie?.message??"";(!(ie instanceof vn)||!(ie instanceof In))&&(X.captureError(ie,"collectibles"),i.capture("collectibleSellFailure",{data:{bidSummary:o,usdSaleValue:te,errorMessage:ut}})),p("error"),h(ie)}},reset:ct,gas:J,error:m,result:g,status:d,isLedger:I}};s();a();var md=({t,apiErrors:e,clientErrors:o})=>{let n={title:t("collectiblesSellStatusErrorTitle"),subtitle:t("collectiblesSellStatusErrorSubtitle")};return e.isSellErrorCode?e?.sellStepsError?.code===1?{title:t("collectiblesSellRecentlyTransferedNFTTitle"),subtitle:t("collectiblesSellRecentlyTransferedNFTSubtitle")}:e?.sellStepsError?.code===3?{title:t("collectiblesSellNotAvailableAnymoreTitle"),subtitle:t("collectiblesSellNotAvailableAnymoreSubtitle")}:e?.sellStepsError?.code===9?{title:t("collectiblesSellNotAvailableAnymoreTitle"),subtitle:t("collectiblesSellNotAvailableAnymoreSubtitle")}:n:o.hasEnoughGas?o.executeSellError?o.executeSellError.message===Dr?{title:t("collectiblesSellNotAvailableAnymoreTitle"),subtitle:t("collectiblesSellNotAvailableAnymoreSubtitle")}:n:null:{title:t("collectiblesSellInsufficientFundsTitle"),subtitle:t("collectiblesSellInsufficientFundsSubtitle")}};s();a();var fd=t=>Te(t)?t.standard==="ERC1155":K(t)?t.standard==="SemiFungible":!1;s();a();var Rr=x(ps());s();a();s();a();var An=class extends Error{constructor(e){super(e),this.name="ProofError"}};async function En({networkID:t,mintAddress:e}){let o="/collectibles/v1/proof",n;try{n=await he.api().post(o,{chainId:t,address:e})}catch{let i=new An(`Failed to fetch proof for ${e} on network ${t}.`);throw X.captureError(i,"collectibles"),i}if(n.status!==200){let i=new An(`Failed to fetch proof for ${e} on network ${t}.`);throw X.captureError(i,"collectibles"),i}return await n.data}async function Ra(t){let{mint:e}=t,o=new Ae.Transaction,n=await En({networkID:"solana:101",mintAddress:e});return o.add(await Ms({...t,...n})),o}var hd=async({mintAddress:t,owner:e,amountToBurn:o,collectionPubKey:n,tokenEdition:r,compression:i,programId:l,isProgrammable:c,connection:d})=>{let p=new Ae.Transaction,m=new U.PublicKey(t),h=await Ks(m,e);if(i?.compressed)return Ra({compression:i,mint:t});if(l===Os)return Hs({mint:t,connection:d,owner:e.toBase58()});if(c)return Ds({senderAddress:e,senderAccount:h,mintAddress:new U.PublicKey(t)});if(r===null||!no(r)){let g=Ia(h,m,e,o),y=Qs(h,e,e);p.add(g,y)}else{let g=Rr.Buffer.from(m.toBytes()),y=Or(g),C=Eo(g),S;if(n!==null){let I=new U.PublicKey(n),$=Rr.Buffer.from(I.toBytes());S=Br($)}let v={metadata:y,owner:e,mint:m,tokenAccount:h,masterEditionAccount:C,splTokenProgram:pn,collectionMetadata:S},{createBurnNftInstruction:O}=await on(),V=O(v,Ut);p.add(V)}return p},bd=async({mintAddress:t,owner:e,amountToBurn:o,collectionPubKey:n,tokenEdition:r,chainId:i,compression:l,programId:c,isProgrammable:d})=>{let p=Ze(i),m=await hd({mintAddress:t,owner:e,amountToBurn:o,collectionPubKey:n,tokenEdition:r,compression:l,programId:c,isProgrammable:d,connection:p});m.recentBlockhash=(await p.getLatestBlockhash("confirmed")).blockhash,m.feePayer=e;let h=await cn(m,{connection:p}),g=await fn(i,[h.compileMessage()]),y=Ls(g);return{burnTxWithPriority:h,networkFeeUiAmount:y}};s();a();var yd=t=>`${t/100}%`,Nr=(t,e)=>t*e/100/100;s();a();s();a();var Lr=class extends Ue{constructor(e){super(e),this.name="GetPinnedCollectionsError"}};async function Pn(t){try{return await t.get("pinnedCollections")}catch{throw new Lr("")}}var Vr=class extends Ue{constructor(e){super(e),this.name="SetPinnedCollectionsError"}};async function _r(t,e){try{return await t.set("pinnedCollections",e)}catch{throw new Vr("")}}s();a();kt.config({EXPONENTIAL_AT:1e3,DECIMAL_PLACES:78});var Mt=(t,e)=>new kt(t).div(rn(e)).toNumber();s();a();s();a();var gd=(t,e="standard",o,n,r,i,l)=>{if(D.isEVMNetworkID(t)){let c=to.get(t).transactionSpeedSeconds(e);return{ownerAddress:o.address,networkID:t,data:{hash:"",nonce:"",unsignedTransaction:mt.parse({from:o.address}),estimatedTimeToMineInSeconds:c},type:"send",display:{summary:{topLeft:{text:`${l("transactionsPendingSending")} ${i} ${n}`},bottomLeft:{text:`${l("transactionsToParagraphInterpolated",{to:r})}`}},detail:{header:`${i} ${n}`,uiRecipient:r}}}}else{if(D.isSolanaNetworkID(t))return{ownerAddress:o.address,networkID:t,data:{signature:""},type:"send",display:{summary:{topLeft:{text:`${l("transactionsPendingSending")} ${i} ${n}`},bottomLeft:{text:`${l("transactionsToParagraphInterpolated",{to:r})}`}}}};if(D.isBitcoinNetworkID(t))return{ownerAddress:o.address,networkID:t,data:{txID:"",psbtHex:""},type:"send",display:{summary:{topLeft:{text:`${l("transactionsPendingSending")} ${i} ${n}`},bottomLeft:{text:`${l("transactionsToParagraphInterpolated",{to:r})}`}}}};if(D.isSuiNetworkID(t))return{ownerAddress:o.address,networkID:t,data:{digest:""},type:"send",display:{summary:{topLeft:{text:`${l("transactionsPendingSending")} ${i} ${n}`},bottomLeft:{text:`${l("transactionsToParagraphInterpolated",{to:r})}`}}}};throw new Error(`Unable to create pending transaction input for network id ${t}}`)}};s();a();s();a();var Na=({url:t,format:e})=>{if(!t)return null;!t.startsWith("http")&&t.split(".").length===2&&(t=`http://${t}`),t.startsWith("www.")&&(t=`https://${t}`),!t.startsWith("http")&&!t.startsWith("https")&&(t=`https://${t}`);try{let{hostname:o,href:n}=new URL(t);switch(e){case"hostname":return o.replace("www.","");case"root":return o.split(".").slice(-2).join(".");case"domain":return o.split(".").slice(-2)[0];case"full":return n;default:return o}}catch{return null}};var Cd=t=>t.replace(/(\/|-|_|#)+?\d+(?!-|_|\/)+/g,"").replace(/\d+( of )\d+/g,"").trim(),Sd=(t,e)=>{if(t.name&&t.name.length>0)return t.name;if(t.externalUrl){let o=Na({url:t.externalUrl,format:"domain"});if(o)return o}if(e?.name){let o=Cd(e.name);if(o)return o}if(e?.symbol)return e.symbol};s();a();var wd=(t,e)=>{if(K(t.chainData))return{standard:t.chainData.standard,pubkey:t.chainData.tokenAccount,mintPubKey:t.chainData.mint,ownerPubKey:e,decimals:parseInt(t.decimals??"0",10),amount:t.balance??"0",delegate:null,delegatedAmount:"",logoURI:null,name:t.name??null,symbol:t.symbol??null,state:"initialized",collectionPubKey:t.collection.id,uses:null,creators:[],uri:t.uri??"",collectionName:t.collection.name??void 0,collectibleImage:t.media?.previews?.medium??void 0}};s();a();var Fr=x(tn()),Td=1e6,xd=1e4,vd=t=>t>Td?">1M":t<xd?(0,Fr.default)(t).format("0,0.[000]"):(0,Fr.default)(t).format("0.[0]a").toUpperCase();s();a();s();a();s();a();function La({chainID:t,amount:e,collectible:o,symbol:n}){let r=na(t);switch(r.chainName){case"solana":return{...r,asset:{amount:e.toString(),mint:"mint"in o?o.mint:"UNKNOWN",symbol:n,type:"collectible"}};case"ethereum":case"polygon":case"base":case"arbitrum":case"monad":return{...r,asset:{amount:e.toString(),address:"contract"in o?o.contract:"UNKNOWN",symbol:n,type:"collectible"}};case"bitcoin":return{...r,asset:{id:"firstCreatedInscriptionId"in o?o.firstCreatedInscriptionId:"UNKNOWN",symbol:n,type:"collectible"}};case"sui":return{...r,asset:{amount:e.toString(),address:"not yet implemented",symbol:n,type:"collectible"}}}}var Id="list",Va=t=>new oa(t,Id),Ad=As(Z,t=>Va(t));s();a();s();a();s();a();s();a();var _a=(t,e={})=>ua(t,{...e,infix:"$",format:e.compact?"0.[00]a":e.format??"0,0.00",decimalFormatSmallNumbers:e.decimalFormatSmallNumbers??"0.00"});var Ed=5e4,Pd="https://help.magiceden.io/en/articles/8450002-mastering-utxo-management-extracting-splitting-sats-on-magic-eden-bitcoin",ja={sendSuccessCondition:"SUBMISSION",collectibleDetailPrecision:7,collectibleDetailCtaBanner:(t,e)=>{let o=t.chainData;if(Bt(o)&&e){let n=new pe(o.utxoDetails.value??0);if(n.lte(Ed))return;let r=Object.values(o.utxoDetails.satributes).reduce((d,{count:p})=>d+p,0),i=Cr(r,D.bitcoin.tokenDecimals),l=Cr(n,D.bitcoin.tokenDecimals),c=_a(l.minus(i).times(e));return{title:Ee.t("collectibleDetailUtxoSplitterCtaTitle"),subtitle:Ee.t("collectibleDetailUtxoSplitterCtaSubtitle",{value:c}),iconColor:"spotPositive",modal:{title:Ee.t("collectibleDetailUtxoSplitterModalCtaTitle"),subtitle:Ee.t("collectibleDetailUtxoSplitterModalCtaSubtitle",{value:c}),buttonText:Ee.t("collectibleDetailUtxoSplitterModalCtaButton"),uri:Pd,iconColor:"spotPositive"}}}}};s();a();var Dt={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};s();a();var Fa={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:5,collectibleDetailCtaBanner:void 0};s();a();var $a={sendSuccessCondition:"CONFIRMATION",collectibleDetailPrecision:9,collectibleDetailCtaBanner:void 0};var kd=new xs({solana:Fa,ethereum:Dt,polygon:Dt,base:Dt,monad:Dt,arbitrum:Dt,bitcoin:ja,sui:$a,hypercore:Dt}),bt=Ts(kd);s();a();function Ud(t){if(!t)return!1;let e=yn(t),o=t.chainData&&Tn(t.chainData)&&!!t.chainData.kioskId;return e||!!o}s();a();var Wa=x(tn()),so=x(P());s();a();s();a();var yt=(t,e,o,n)=>{(!e||e>=400&&e<500)&&(X.addBreadcrumb(o,t.message,"info",n),X.captureError(t,"collectibles"))};s();a();var Be=(r=>(r[r.Always=1/0]="Always",r[r.Short=re({days:1})]="Short",r[r.Medium=re({days:3})]="Medium",r[r.Long=re({days:7})]="Long",r))(Be||{}),_e=(i=>(i[i.Immediate=0]="Immediate",i[i.Short=re({minutes:1})]="Short",i[i.Medium=re({minutes:2.5})]="Medium",i[i.Long=re({minutes:5})]="Long",i[i.Never=1/0]="Never",i))(_e||{}),io=(c=>(c[c.Shortest=re({seconds:10})]="Shortest",c[c.Shorter=re({seconds:30})]="Shorter",c[c.Short=re({minutes:1})]="Short",c[c.Medium=re({minutes:2.5})]="Medium",c[c.Long=re({minutes:5})]="Long",c[c.Longer=re({minutes:7.5})]="Longer",c[c.Longest=re({minutes:10})]="Longest",c))(io||{});var Bd=b.object({caip19:b.string(),name:b.string(),symbol:b.string()}),Ha=b.object({bps:b.number(),kind:b.union([b.literal("marketplace"),b.literal("royalty")]),recipient:b.string().optional()}),Md=b.object({amount:b.number(),feeBreakdown:b.array(Ha),netAmount:b.number(),token:Bd,totalFeeBps:b.number()}),Dd=b.object({name:b.string(),logo:b.string(),url:b.string().optional()}),Ga=b.object({id:b.string(),expiration:b.string().optional(),price:Md,source:Dd}),Rd=b.object({bids:b.array(Ga)}),za=new Ue("Failed to fetch collectible bids."),Nd="collectible-instant-sell-bids",Ld=async t=>{if(!t.address)throw za;try{let e=await he.api().validateStatus(!0).post("/collectibles/v1/bids",{asset:t}),{bids:o}=Rd.parse(e.data);return o}catch(e){if(ft(e)){let o=e.response?.status;yt(e,o,Nd)}throw za}},zr=({bidAsset:t,isEnabled:e})=>{let o=e&&t.address!==null&&t.chainId!==null;return ne({enabled:o,staleTime:_e.Short,refetchInterval:io.Shortest,queryKey:B.collectibleBids(t),async queryFn(){return Ld(t)}})},kn=t=>{let e=t?.chainData,o=t?.chain.id??null,n=Te(e),r=K(e),i=n?{tokenId:e.id}:{},l=r?{contractType:e.standard}:{},c=n?e.contract.toLowerCase():r?e.mint:null;return{chainId:o,address:c,resourceType:"address",...i,...l}};s();a();var Vd=x(P());var ae=b.enum(["auth","nft-approval","sale","order-signature","refetch","blur-swap","update-proof"]),_d=b.enum(["/execute/auth-signature/v1","/order/v3"]),Xe=b.enum(["transaction","signature","post","refetch"]),jd=b.enum(["eip712","eip191"]),Fd=b.object({domain:b.any(),types:b.any(),value:b.any()}),$d=b.object({message:b.string()}),zd=b.object({from:b.string(),to:b.string(),data:b.string()}),Hd=b.object({endpoint:_d,body:b.object({id:b.string(),kind:b.string()})}),Gd=b.object({action:ae,chainId:Qo,type:b.literal(Xe.enum.signature),data:b.object({signatureKind:jd,signatureData:b.union([$d,Fd]),postData:Hd})}),qd=b.object({chainId:Qo,action:ae,data:zd,type:b.literal(Xe.enum.transaction)}),Wd=b.object({chainId:Qo,action:ae,type:b.literal(Xe.enum.refetch),data:b.object({resource:b.string()})}),Kd=b.union([Gd,qd,Wd]),Qd=b.object({action:ae,chainId:bs,type:b.literal(Xe.enum.transaction),data:b.object({transaction:b.string()})}),Xd=b.union([Kd,Qd]),Yd=b.object({steps:b.array(Xd),orderId:b.string().optional()}),Jd=new Ue("Failed to fetch collectible sell steps."),Zd="collectible-instant-sell-steps",ep=async t=>{try{let e=await he.api().validateStatus(!0).post("/collectibles/v1/sell",t);return Yd.parse(e.data)}catch(e){if(ft(e)){let o=e.response?.status;if(yt(e,o,Zd),e.response?.data?.code){let{code:n}=e.response.data;throw{code:n}}if(o)throw e}throw Jd}},Hr=({sellAsset:t})=>{let e=t.details.orderId!==void 0;return ne({enabled:e,queryKey:B.collectibleSellSteps(t),staleTime:1/0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:(o,n)=>n.code?!1:o<3,async queryFn(){return ep(t)}})};var qa=(t,e,o)=>{let n=o?.chainData,r=Te(n),i=K(n),l=o?.owner,c=r?l?.toLowerCase():l,d=e?.id,p=e?.source?.name,m=i?{minPrice:e?.price?.netAmount,tokenAccount:n.tokenAccount}:{};return{details:{asset:t,owner:c,orderId:d,marketplace:p,...m}}};var tp={steps:[],orderId:""},op=({collectible:t})=>{let{t:e}=Y(),o=(0,so.useMemo)(()=>kn(t),[t]),{data:n=[],isPending:r,isError:i}=zr({bidAsset:o,isEnabled:!0}),l=(0,so.useMemo)(()=>n.length>0?n[0]:void 0,[n]),c=(0,so.useMemo)(()=>qa(o,l,t),[o,l,t]),{data:d=tp,isPending:p,isError:m,refetch:h,error:g}=Hr({sellAsset:c}),y=(0,so.useMemo)(()=>l&&t?Ka({t:e,bid:l,collectible:t}):void 0,[e,l,t]),C=(0,so.useMemo)(()=>m?Number.isInteger(g.code):!1,[m,g]);return{bid:l,bidSummary:y,isLoadingBids:r,isErrorBids:i,sellSteps:d,isLoadingSellSteps:p,isErrorSellSteps:m,refetchSellSteps:h,sellStepsError:g,isSellErrorCode:C}},np=({lastSale:t,receiveAmount:e})=>t!==void 0?e-t:e,rp=({offerAmount:t,collectionFloor:e})=>t-e,ip=t=>{let e=Math.abs(t)<.001?"0.0000%":"0.00%",o=(0,Wa.default)(t).format(e);return`${t>0?"+":""}${o}`},sp=t=>{if(t){let{price:e,token:o}=t,n=o?.decimals;if(n)return Mt(e,n)}},ap=t=>{if(t){let{price:e,token:o}=t,n=o?.decimals;if(n)return Mt(e,n)}},lp=t=>{if(!t||!t.previews)return;let{previews:e}=t;if(e.small)return e.small;if(e.medium)return e.medium;if(e.large)return e.large};var Ka=({bid:t,collectible:e,t:o})=>{let{lastSalePrice:n,media:r,name:i,collection:l}=e,{name:c,logo:d}=t.source,{amount:p,netAmount:m,feeBreakdown:h,token:g,totalFeeBps:y}=t.price,{symbol:C,caip19:S}=g,v=0,O=m,V=l.id,I=e.id,$=ap(n),J=C.slice(0,6),ct=e.chain.symbol,te=sp(l.floorPrice),Se=te?rp({offerAmount:p,collectionFloor:te}):void 0,ie=Se?ip(Se):void 0;return{bidTokenSymbol:J,caip19:S,collectionId:V,collectibleId:I,orderId:t.id,collectibleChainId:e.chain.id,collectibleChainSymbol:ct,collectionFloor:te,collectibleImage:lp(r),collectibleName:i??o("collectiblesUnknownCollectible"),collectionName:l.name??o("collectiblesUnknownCollection"),currencySymbol:t.source.name==="Blur"?ct:J,fees:h,floorDifference:Se,floorDifferencePercent:ie,lastSale:$,marketplace:c,marketplaceLogoURL:d,offerAmount:p,offerAmountFormatted:gn(p),phantomFeePercentage:v,pnl:np({lastSale:$,receiveAmount:O}),receiveAmount:O,receiveAmountFormatted:gn(O),totalFeeBps:y}},cp=({gasFee:t,totalFeeBps:e,offerAmount:o})=>{let n=Nr(e,o)+t.toNumber();return{raw:n,formatted:gn(n)}};s();a();var Qa=new Map([[ae.enum["nft-approval"],8e4],[ae.enum["blur-swap"],42e3],[ae.enum.sale,39e4],["default",42e4]]),dp=(t,e,o,n)=>{let r=t==="Blur",i=o.filter(S=>S.type==="transaction").map(({action:S})=>({action:S}));if(i.some(({action:S})=>S===ae.enum["nft-approval"])||(i=[...i,{action:ae.enum["nft-approval"]}]),r){let S=i.some(({action:O})=>O===ae.enum.sale),v=i.some(({action:O})=>O===ae.enum["blur-swap"]);S||(i=[...i,{action:ae.enum.sale}]),v||(i=[...i,{action:ae.enum["blur-swap"]}])}let c=i?.reduce((S,{action:v})=>{let O=Qa.get(v)??Qa.get("default");return S+(O??0)},0),d=new pe(c),{status:p,data:m}=pa({gasLimit:d,networkID:e,transactionSpeed:"standard"}),{data:h}=ma(e,m),g=Vs(m),y=Number(g?.replace(/[^\d.]/g,"")??0),C=n?n.isGreaterThan(y):!1;return{gasEvm:y,gasEstimation:m,gasEstimationStatus:p,ethFeeUI:g,gasEstimationPrice:h,hasEnoughGas:C}};s();a();var tt=x(P());var mp=()=>{let{data:t}=Jo();return(0,tt.useMemo)(()=>{let o=t?.type,n=t?.name??"",r=t?.addresses??[],i=t?.identifier??"";return{isLedger:t?.type==="ledger",accountName:n,accountType:o,chainAddresses:r,accountIdentifier:i}},[t])},fp=({networkID:t,unsignedTransaction:e,pendingActivityRows:o,accountIdentifier:n,accountSigner:r,storage:i,includeCallPayload:l})=>({accountSigner:r,accountIdentifier:n,networkID:t,unsignedTransaction:e,...l&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:"sell",display:{summary:o}},storage:i}),hp=async(t,e,o,n,r,i,l)=>{try{if(!o)throw new Error("Gas estimation is required");if(!l)throw new Error("Bid summary is required");let{data:c,chainId:d,action:p}=e,{collectionName:m,marketplace:h,receiveAmount:g,currencySymbol:y,collectibleChainSymbol:C,bidTokenSymbol:S}=l,v=en(h),O={};p==="nft-approval"&&(O={topRight:{text:""},bottomRight:{text:""},topLeft:{text:t("collectiblesApproveCollection",{collectionName:m})},bottomLeft:{text:v}}),p==="sale"&&(O={topRight:{text:`+${g} ${y}`},topLeft:{text:t("collectiblesSoldCollectible")},bottomRight:{text:`-${m}`},bottomLeft:{text:v}}),p==="blur-swap"&&(O={topRight:{text:`+${g} ${C}`},topLeft:{text:t("transactionsSwapped")},bottomRight:{text:`-${g} ${S}`},bottomLeft:{text:v}});let V=mt.parse({type:"0x2",to:c.to,from:c.from,data:c.data,chainId:D.getEVMNetworkIDValue(d),gas:`0x${o.gasLimit.toString(16)}`,maxFeePerGas:`0x${o.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${o.maxPriorityFeePerGas.toString(16)}`}),I=fp({storage:n,accountSigner:r,pendingActivityRows:O,includeCallPayload:!1,networkID:d,unsignedTransaction:V,accountIdentifier:i.accountIdentifier}),$=await Fs(I);return{type:e.type,data:$}}catch(c){return{type:e.type,error:c}}},bp=async(t,e,o)=>{try{let{chainId:n,data:r}=t,{signatureData:i,signatureKind:l,postData:c}=r;if(l==="eip191"&&"message"in i){let d=await e.sign(o.accountIdentifier,{signingType:"message",chainType:"eip155",message:i.message});if(d.status==="success")return await he.api().post("/collectibles/v1/submit-signature",{chainId:n,signature:d.signature,postData:c}),{type:t.type,data:"success"};throw new Error("Execute Sell: Couldn't sign message")}throw new Error("Execute Sell: EIP721 is not yet supported")}catch(n){return{type:t.type,error:n}}},yp=async(t,e)=>{try{let{resource:o}=t.data;if(o==="/sell"){let{data:n}=await e();return{type:t.type,data:n?.steps}}throw new Error("Execute Sell: Resource is not supported")}catch(o){return{type:t.type,error:o}}},gp=[ae.enum.auth,ae.enum["nft-approval"],ae.enum.sale],Cp="Steps are required",Sp="These steps are not from the same bid",Un=class extends Error{message=Cp},On=class extends Error{message=Sp},wp=(t,e,o,n,r,i,l)=>{let c=oe(),d=Z(),p=se(),m=Xt(),[h,g]=(0,tt.useState)("idle"),[y,C]=(0,tt.useState)(null),[S,v]=(0,tt.useState)(null),{t:O}=Y(),V=mp(),{chainAddresses:I,isLedger:$}=V;(0,tt.useEffect)(function(){h==="loading"&&xn(p,r)},[h,p,r]),(0,tt.useEffect)(function(){h==="success"&&r&&ro(p,{id:r.collectibleId,amount:1})},[h,p,I,r]);let J=()=>{g("idle"),C(null),v(null)},ct=l&&r?.receiveAmount?r.receiveAmount*l:void 0,te=async(Se,ie=new Map)=>{let ut=Se??e;try{if(t&&t!==""&&t!==r?.orderId)throw new On;if(!Array.isArray(ut)||ut.length===0)throw new Un;g("loading");for await(let dt of ut){let{action:pt}=dt,Bu=ie.get(pt)==="success",Mu=pt===ae.enum.sale,cs=pt===ae.enum.refetch,Du=gp.some(Kt=>Kt===pt);if(Bu)continue;cs||ie.set(pt,"loading");let Ru=async Kt=>{switch(Kt.type){case Xe.enum.transaction:return await hp(O,Kt,o,c,m,V,r);case Xe.enum.signature:return await bp(Kt,m,V);case Xe.enum.refetch:return await yp(Kt,n)}},{type:us,data:br,error:ds}=await Ru(dt);if(Du&&ds)throw ds;if(br&&(cs||ie.set(pt,"success"),us===Xe.enum.transaction&&Mu&&v(br),us===Xe.enum.refetch))return await vs(500),await te(br,ie)}g("success"),d.capture("collectibleSellSuccess",{data:{bidSummary:r,usdSaleValue:ct}})}catch(dt){let pt=dt?.message??"";(!(dt instanceof Un)||!(dt instanceof On))&&(X.captureError(dt,"collectibles"),d.capture("collectibleSellFailure",{data:{bidSummary:r,usdSaleValue:ct,errorMessage:pt}})),g("error"),C(dt)}};return{executeSellEvmSteps:te,reset:J,error:y,result:S,status:h,isLedger:$}};s();a();var Tp=.01,xp=t=>{let{fungible:e}=Sa({key:Ta(t.collectibleChainId,void 0)}),o=e?.data.balance;return{hasEnoughGas:o?o.isGreaterThan(Tp):!1}};s();a();var St=x(P());s();a();var Gr=x(P());s();a();s();a();var Ya=t=>{let e=!1;return{collectibles:t.reduce((n,r)=>{let i=wn.safeParse(r);return i.success?n.push(i.data):e=!0,n},[]),containsParseFailure:e}};var vp="collectibles",Ip=new Error("Failed to fetch collectibles for addresses");async function Ja(t){let e="/collectibles/v1";try{let n=(await he.api().post(e,{addresses:t})).data,r=!!n.isTrimmed;if(!n.collectibles)throw Ip;let{collectibles:i,containsParseFailure:l}=Ya(n.collectibles);return l&&X.captureError(new Error("collectibles failed to parse some items"),"collectibles"),{allCollectibles:i,isTrimmed:r}}catch(o){if(ft(o)){let n=o.response?.status;yt(o,n,vp)}throw o}}s();a();s();a();var el=t=>{let e=[];for(let[o,n]of t){n.sort((i,l)=>{let c=i.name??"",d=l.name??"",p=c.localeCompare(d);if(c.localeCompare(d))return p;let m=Za(i),h=Za(l);return m.localeCompare(h)});let[r]=n;r&&e.push({..."externalUrl"in r?{externalUrl:r.externalUrl}:void 0,...r.collection,items:n})}return e.sort((o,n)=>{if(o.items.length>n.items.length)return-1;if(n.items.length>o.items.length)return 1;let r=o.name??o.id??"",i=n.name??n.id??"";return r.localeCompare(i)})};function Za(t){let e=t.chainData;return K(e)?e.tokenAccount:Te(e)?e.id:(Ne(e),t.id)}function tl(t){let e=new Map;for(let o of t){let n=o.collection.id,r=e.get(n)??[];r.push(o),e.set(n,r)}return el(e)}var ol=({addresses:t,queryOptions:e={staleTime:_e.Short,refetchInterval:io.Long,enabled:!0},select:o})=>{let n=se(),r=B.collections(t),i=t.length!==0&&t.every(l=>!D.isLocalNetworkID(l.networkID));return ne({enabled:i&&e.enabled,queryKey:r,gcTime:Be.Medium,staleTime:e.staleTime,refetchInterval:e.refetchInterval,async queryFn({queryKey:[,,{addresses:l}]}){let[c]=await Promise.allSettled([Ja(l)]);if(c.status==="rejected")throw new Error("failed to load unlisted collections");let{allCollectibles:d,isTrimmed:p}=c.status==="fulfilled"?c.value:{allCollectibles:[],isTrimmed:!1},m=tl(d),h=await Ba(n),g=Ma(m,h);return{items:g,nrOfItems:g.reduce((y,C)=>y+C.items.length,0),isTrimmed:p}},select:o})},gt=t=>ol({...t,select:(0,Gr.useCallback)(e=>e.items,[])}),nl=t=>ol({...t,select:(0,Gr.useCallback)(o=>o.isTrimmed,[])}).data??!1;s();a();var me=x(P());s();a();function xe(t){let e=oe();return ne({gcTime:Be.Long,staleTime:1/0,enabled:!!t,queryKey:B.visibilityOverrides(t??""),async queryFn(){return t?await et(e,t):new Map}})}s();a();var Nt=x(P());s();a();function Rt(){let t=oe(),e=se(),o=Z();return Re({async mutationFn({accountId:n,mutations:r}){await xo(t,o,{accountId:n,mutations:r})},async onSuccess(n,{accountId:r}){await e.invalidateQueries({queryKey:B.visibilityOverrides(r)}),await Promise.allSettled([e.invalidateQueries({queryKey:B.hiddenCollections(r)}),e.invalidateQueries({queryKey:B.unhiddenCollections(r)})])}})}async function Mn({collectible:t,visibilityOverrides:e,setVisibilityOverrides:o,accountId:n,desiredVisibility:r,onSuccess:i,onError:l}){if(!e)return;let c=t.collection.id||t.id,d=e.get(c)?.status;try{let p=il(r,t.collection);await o({accountId:n,mutations:[{id:c,visibility:p}]}),await i({collectible:t,desiredVisibility:r,previousVisibility:d,updatedVisibility:p})}catch(p){await l(p,{collectible:t,desiredVisibility:r})}}async function rl({collection:t,visibilityOverrides:e,setVisibilityOverrides:o,accountId:n,desiredVisibility:r,onSuccess:i,onError:l}){if(!e)return;let c=t.id,d=e.get(c)?.status;try{let p=il(r,t);await o({accountId:n,mutations:[{id:c,visibility:p}]}),i&&await i({collection:t,desiredVisibility:r,previousVisibility:d,updatedVisibility:p})}catch(p){l&&await l(p,{collection:t,desiredVisibility:r})}}function il(t,e){let{spamStatus:o}=e,n=sa({minimum:"NOT_VERIFIED",spamStatus:o});switch(t){case"hidden:reported_spam":if(n)return"hidden:reported_spam";if(o==="POSSIBLE_SPAM"||o==="SPAM")return null;throw new Error(`Unexpected spam status: ${o} found while marking spam.`);case"visible:reported_notSpam":if(n)return null;if(o==="POSSIBLE_SPAM"||o==="SPAM")return"visible:reported_notSpam";throw new Error(`Unexpected spam status: ${o} found while marking not spam.`);case"hidden":if(n)return"hidden";if(o==="POSSIBLE_SPAM"||o==="SPAM")return null;throw new Error(`Unexpected spam status: ${o} found while marking hidden.`);case"visible":if(n)return null;if(o==="POSSIBLE_SPAM"||o==="SPAM")return"visible";throw new Error(`Unexpected spam status: ${o} found while marking visible.`)}throw new Error(`Unexpected desired visibility: ${t} found while calculating new visibility.`)}function Ct(t){return{networkId:t.chain.id,chainId:D.getChainID(t.chain.id),collectionId:t.collection.id,collectibleId:t.id,collectibleName:t.name,collectibleDescription:t.description,collectionName:t.collection.name,collectionDescription:t.collection.description,collectionUrl:t.collection.externalUrl}}function sl({accountId:t,onError:e,onSuccess:o}){let{data:n}=xe(t),{mutateAsync:r}=Rt();return(0,Nt.useCallback)(async i=>{await Mn({collectible:i,visibilityOverrides:n,setVisibilityOverrides:r,accountId:t,desiredVisibility:"hidden:reported_spam",onSuccess:o,onError:e})},[n,r,t,e,o])}function al({accountId:t,onError:e,onSuccess:o}){let{data:n}=xe(t),{mutateAsync:r}=Rt();return(0,Nt.useCallback)(async i=>{await Mn({collectible:i,visibilityOverrides:n,setVisibilityOverrides:r,accountId:t,desiredVisibility:"visible:reported_notSpam",onSuccess:o,onError:e})},[n,r,t,e,o])}function ll({accountId:t,onError:e,onSuccess:o}){let{data:n}=xe(t),{mutateAsync:r}=Rt();return(0,Nt.useCallback)(async i=>{await Mn({collectible:i,visibilityOverrides:n,setVisibilityOverrides:r,accountId:t,desiredVisibility:"hidden",onSuccess:o,onError:e})},[n,r,t,e,o])}function cl({accountId:t,onError:e,onSuccess:o}){let{data:n}=xe(t),{mutateAsync:r}=Rt();return(0,Nt.useCallback)(async i=>{await Mn({collectible:i,visibilityOverrides:n,setVisibilityOverrides:r,accountId:t,desiredVisibility:"visible",onSuccess:o,onError:e})},[n,r,t,e,o])}function ul({accountId:t,onError:e,onSuccess:o}){let{data:n}=xe(t),{mutateAsync:r}=Rt();return(0,Nt.useCallback)(async i=>{await rl({collection:i,visibilityOverrides:n,setVisibilityOverrides:r,accountId:t,desiredVisibility:"hidden",onSuccess:o,onError:e})},[n,r,t,e,o])}function dl({accountId:t,onError:e,onSuccess:o}){let{data:n}=xe(t),{mutateAsync:r}=Rt();return(0,Nt.useCallback)(async i=>{await rl({collection:i,visibilityOverrides:n,setVisibilityOverrides:r,accountId:t,desiredVisibility:"visible",onSuccess:o,onError:e})},[n,r,t,e,o])}s();a();var qr=x(P());var pl=({toast:t,accountId:e})=>{let{t:o}=Y(),n=Z(),r=(0,qr.useCallback)(({collectible:l,updatedVisibility:c})=>{c!==null&&n.capture("collectionHidden",{data:Ct(l)}),t&&t.success(o("collectionHideSuccess"))},[o,t,n]),i=(0,qr.useCallback)((l,c)=>{t&&t.error(o("collectionHideFail"))},[o,t]);return ll({accountId:e,onSuccess:r,onError:i})};s();a();var Wr=x(P());var ml=({toast:t,accountId:e})=>{let{t:o}=Y(),n=Z(),r=(0,Wr.useCallback)(({collectible:l,updatedVisibility:c})=>{c!==null&&n.capture("collectionUnhidden",{data:Ct(l)}),t&&t.success(o("collectionUnhideSuccess"))},[o,t,n]),i=(0,Wr.useCallback)((l,c)=>{t&&t.error(o("collectionUnhideFail"))},[o,t]);return cl({accountId:e,onSuccess:r,onError:i})};function Ap({accountId:t,collectible:e,toast:o}){let n=pl({accountId:t,toast:o}),r=(0,me.useCallback)(()=>{if(e)return n(e)},[n,e]),i=ml({accountId:t,toast:o}),l=(0,me.useCallback)(()=>{if(e)return i(e)},[i,e]),{data:c}=xe(t??""),d=(0,me.useMemo)(()=>c?.get(e?.collection.id??e?.id??""),[c,e]),p=(0,me.useMemo)(()=>e?bn(d,{spamStatus:e.collection.spamStatus}):!1,[e,d]),m=(0,me.useCallback)(()=>p?l():r(),[p,r,l]);return(0,me.useMemo)(()=>({isHidden:p,onHideCollectible:r,onUnhideCollectible:l,onToggleHide:m}),[r,m,l,p])}function Ep(t){let{data:e,isPending:o}=xe(t),n=(0,me.useCallback)(l=>{if(!l)return!1;let c=l.collection.id||l.id;return vr(e,{spamStatus:l.collection.spamStatus,key:c})},[e]),r=(0,me.useCallback)(l=>{if(!l)return"NOT_VERIFIED";let c=l.collection.id||l.id;return xr(e,{spamStatus:l.collection.spamStatus,key:c})},[e]),i=(0,me.useCallback)(l=>vo(r(l)),[r]);return(0,me.useMemo)(()=>({getIsHidden:n,getSpamStatus:r,getIsSpam:i,isLoading:o}),[n,r,i,o])}function Dn(t){let{data:e,isPending:o}=xe(t),n=(0,me.useCallback)(l=>{if(!l)return!1;let c=l.id;return vr(e,{spamStatus:l.spamStatus,key:c})},[e]),r=(0,me.useCallback)(l=>{if(!l)return"NOT_VERIFIED";let c=l.id;return xr(e,{spamStatus:l.spamStatus,key:c})},[e]),i=(0,me.useCallback)(l=>vo(r(l)),[r]);return(0,me.useMemo)(()=>({getIsHidden:n,getSpamStatus:r,getIsSpam:i,isLoading:o}),[n,r,i,o])}function fl(t){let e=Dn(t),o=ul({accountId:t}),n=dl({accountId:t});return(0,me.useMemo)(()=>({...e,hideCollection:o,unhideCollection:n}),[e,o,n])}s();a();var hl=x(P()),Pp=t=>t.reduce((e,o)=>({...e,[o]:1}),{});function Kr({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:o,getIsSpam:n}){let r=[],i=[],l=[],c=[],d=Pp(e),p={};for(let h of t)n(h)&&o(h)?c.push(h):o(h)?i.push(h):d[h.id]?p[h.id]=h:n(h)?l.push(h):r.push(h);let m=[];for(let h of e)p[h]&&m.push(p[h]);return{collections:[...m,...r,...l],hiddenCollections:i,spamCollections:c}}var Qr=({allCollections:t=[],pinnedCollectionIds:e=[],getIsHidden:o,getIsSpam:n})=>(0,hl.useMemo)(()=>Kr({allCollections:t,pinnedCollectionIds:e,getIsHidden:o,getIsSpam:n}),[t,o,n,e]);s();a();var Rn=x(P()),Xr={location:0,distance:50,threshold:.3},JT={...Xr,keys:["name"]},ZT={...Xr,keys:["name"]},ex={...Xr,keys:["name"]},ko=(t,e)=>{if(e===void 0)return!1;let o=t.toLowerCase();return e.toLowerCase().split(" ").map(n=>n.startsWith(o)||o.startsWith(n)&&e.toLowerCase().includes(o)).includes(!0)};var bl=(t,e)=>(0,Rn.useMemo)(()=>({collections:t.filter(n=>ko(e,n.name||n.items[0].name))}),[e,t]),kp=(t,e,o,n)=>{let r=(0,Rn.useMemo)(()=>t.flatMap(i=>i.items),[t]);return(0,Rn.useMemo)(()=>{let i=t.filter(p=>ko(n,p.name)),l=r.filter(p=>ko(n,p.name)),c=e.filter(p=>ko(n,p.name)),d=o.filter(p=>ko(n,p.name));return{collections:i,collectibles:l,hiddenCollections:c,spamCollections:d}},[n,r,t,e,o])};var Up=re({seconds:10}),Op=re({seconds:5});function Bp({account:t}){let e=t?.identifier??"",o=t?.addresses??[],{data:n=[],isLoading:r}=gt({addresses:o,queryOptions:{staleTime:Op,refetchInterval:Up}}),[i,l]=(0,St.useState)(""),c=Us(i)??"",d=(0,St.useCallback)(I=>l(typeof I=="string"?I:I.currentTarget.value),[l]),{getIsHidden:p,getIsSpam:m,getSpamStatus:h,hideCollection:g,unhideCollection:y,isLoading:C}=fl(e),S=(0,St.useMemo)(()=>{let{collections:I,hiddenCollections:$,spamCollections:J}=Kr({allCollections:n,getIsHidden:p,getIsSpam:m});return[...I,...$,...J]},[n]),v=bl(S,c),O=(0,St.useCallback)(({item:I,status:$})=>$==="show"?y(I):g(I),[y,g]);return{viewState:(0,St.useMemo)(()=>({accountId:e,listItems:c?v.collections:S,searchQuery:i,debouncedSearchQuery:c,handleSearch:d,getIsHidden:p,getIsSpam:m,getSpamStatus:h,onToggleHidden:O}),[e,v.collections,i,d,S,O,p,m,h,c]),viewStateLoading:C||r}}s();a();var ti=x(Vu());s();a();s();a();var fe=[];for(let t=0;t<256;++t)fe.push((t+256).toString(16).slice(1));function yl(t,e=0){return(fe[t[e+0]]+fe[t[e+1]]+fe[t[e+2]]+fe[t[e+3]]+"-"+fe[t[e+4]]+fe[t[e+5]]+"-"+fe[t[e+6]]+fe[t[e+7]]+"-"+fe[t[e+8]]+fe[t[e+9]]+"-"+fe[t[e+10]]+fe[t[e+11]]+fe[t[e+12]]+fe[t[e+13]]+fe[t[e+14]]+fe[t[e+15]]).toLowerCase()}s();a();var Yr,Mp=new Uint8Array(16);function Jr(){if(!Yr){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Yr=self.crypto.getRandomValues.bind(self.crypto)}return Yr(Mp)}s();a();s();a();var Dp=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),Zr={randomUUID:Dp};function Rp(t,e,o){if(Zr.randomUUID&&!e&&!t)return Zr.randomUUID();t=t||{};let n=t.random??t.rng?.()??Jr();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(o=o||0,o<0||o+16>e.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);for(let r=0;r<16;++r)e[o+r]=n[r];return e}return yl(n)}var ei=Rp;s();a();var Nn={recipient:"",recipientHandle:"",addressBookRecipient:void 0,amountAsset:new kt(0),amountUsd:0,transactionSpeed:"standard",solana:{references:[]},multichainTransaction:void 0},gl=class extends Error{constructor(e){super(e),this.name="SendFungibleFlowError"}};var Cl={sendSessionId:"",encodedCaip19:void 0,fungibleKey:void 0,splTokenAccount:void 0,analyticsRecipient:void 0,sendFormValues:Nn,shouldShowFiatValues:!1,retryArgs:void 0,confirmedFungibleAndSender:null,gasEstimation:void 0},Np=Qe((t,e)=>({...(0,ti.default)(Cl),resetSendSlice:()=>{let o=(0,ti.default)(Cl);o.sendSessionId=ei(),t(o)},setAnalyticsRecipient:o=>{t({analyticsRecipient:o})},setSendFungibleKey:(o,n,r)=>{t({fungibleKey:o,splTokenAccount:n,encodedCaip19:r})},setSendFormValues:o=>{t({sendFormValues:o})},setInputAmount:o=>{let n=e();t({sendFormValues:{...n.sendFormValues,inputAmount:o}})},setShouldShowFiatValues:o=>{t({shouldShowFiatValues:o})},setRetryArgs:o=>{t({retryArgs:o})},setGasEstimation:o=>{t({gasEstimation:o})}}));s();a();var Sl={collectible:void 0,sendFormValues:Nn,shouldRequireAmount:!1},oi=Qe(t=>({...Sl,resetSendSlice:()=>{t({...Sl})},setSendCollectible:e=>{t({collectible:e})},setSendFormValues:e=>{t({sendFormValues:e})},setShouldRequireAmount:e=>{t({shouldRequireAmount:e})}}));s();a();s();a();var Lp={query:""},Vp=Qe(t=>({...Lp,setQuery:e=>{t({query:e})}}));s();a();s();a();var de=x(_u());var _p="token-account-min-balances",wl=de.struct([de.blob(32,"mint"),de.blob(32,"owner"),de.nu64("amount"),de.blob(93)]),uv=de.struct([de.blob(44),de.u8("decimals"),de.blob(37)]),jp=de.struct([de.blob(679)]),Fp=de.struct([de.u8("edition"),de.blob(281)]),$p=async t=>t.getMinimumBalanceForRentExemption(wl.span).then(pe),zp=async t=>pe(await t.getMinimumBalanceForRentExemption(jp.span)+await t.getMinimumBalanceForRentExemption(Fp.span)+await t.getMinimumBalanceForRentExemption(wl.span));function Hp({tokenEdition:t,connection:e}){return ne({queryKey:[_p,{tokenEdition:t}],queryFn:async()=>e?t===null||!no(t)?$p(e):zp(e):pe(0)})}s();a();var Tl=x(P()),Gp=(t,e,o=!1,n)=>(0,Tl.useMemo)(()=>{if(t)return Ln({collectibleMedia:t,isImageAnimationEnabled:o,previewSize:n??"medium",mediaTypeOverride:e})},[t,e,o,n]),Ln=({collectibleMedia:t,isImageAnimationEnabled:e,previewSize:o,mediaTypeOverride:n})=>{let r=n??t.type;if((r==="image"||r==="other")&&t.previews?.[o]){let l=e?"":`${o==="medium"?"=":"-"}k`;return`${t.previews[o]}${l}`}return t[r]?.url};s();a();s();a();var xl={burnCollectibleTx:void 0,burnCollectibleTxFee:void 0},vl=t=>({...xl,resetBurnCollectible:()=>t({...xl}),setBurnCollectibleTx:e=>t({burnCollectibleTx:e}),setBurnCollectibleTxFee:e=>t({burnCollectibleTxFee:e})});s();a();var Il={multichainSellCollectible:void 0},Al=t=>({...Il,resetMultichainSellCollectible:()=>t({...Il}),setMultichainSellCollectible:e=>t({multichainSellCollectible:e})});s();a();var El={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},Pl=t=>({...El,reset:()=>t({...El}),setListCollectible:e=>t({listCollectible:e}),setListPrice:e=>t({listCollectiblePrice:e}),setEditListPrice:e=>t({editListCollectiblePrice:e}),setUnlistCollectible:e=>t({unlistCollectible:e}),setTransactionURL:e=>t({transactionURL:e})});s();a();var kl={multichainListCollectible:null,multichainListCollectiblePrice:null,editMultichainListCollectiblePrice:null,unlistMultichainCollectible:null,multichainTransactionURL:null},Ul=t=>({...kl,reset:()=>t({...kl}),setMultichainListCollectible:e=>t({multichainListCollectible:e}),setMultichainListPrice:e=>t({multichainListCollectiblePrice:e}),setEditMultichainListPrice:e=>t({editMultichainListCollectiblePrice:e}),setUnlistMultichainCollectible:e=>t({unlistMultichainCollectible:e}),setMultichainTransactionURL:e=>t({multichainTransactionURL:e})});var qp=Qe((t,e)=>({...Pl(t,e),...vl(t,e),...Ul(t,e),...Al(t,e)}));s();a();s();a();var Wp=500,Ol=B.collections([])[1],Kp=[Ol,B.hiddenCollections("")[1],B.unhiddenCollections("")[1],B.pinnedCollections("")[1]],Qp=t=>{let e=String(t.queryKey[1]);return e===Ol?t.state.data?.nrOfItems<=Wp:Kp.includes(e)};s();a();var Rl=x(P());s();a();var Dl=x(P());s();a();var Bl=x(tn()),Ml=({value:t,type:e})=>{if(!t)return"";try{switch(e){case"number":return(0,Bl.default)(t).format("0,0.[00]").toString();case"date":return new Date(Number(t)).toLocaleDateString();default:return`${t}`}}catch{return`${t}`}};var ni=t=>(0,Dl.useMemo)(()=>{if(!t)return[];let e=t.chainData;return Ne(e)&&e.utxoDetails?e.utxoDetails.satributes.map(({count:o,displayName:n,description:r,url:i})=>({type:n.toUpperCase(),value:Ee.t(Xp(o,"collectibleDetailSatsCount_one","collectibleDetailSatsCount_other"),{count:o})??"",modal:{name:n,description:r,iconUrl:i}})):t.attributes.map(({trait_type:o,value:n,display_type:r})=>({type:o,value:Ml({value:n,type:r})}))},[t]),Xp=(t,e,o)=>t===1?e:o;function Yp(t){let{chain:e,owner:o}=t||{},n=e?.id,{data:r}=Zo({address:o,networkID:n});ya(r);let i=ni(t),l=n?D.getChainID(n):void 0,c=l?ws(l):void 0,{data:d}=ca({query:c?{data:c}:void 0});return{ctaBanner:(0,Rl.useMemo)(()=>{if(!(!t||!d||!l))return bt.get(l).collectibleDetailCtaBanner?.(t,d.price)},[l,t,d]),traits:i}}s();a();s();a();s();a();s();a();var Nl=x(Xo()),Ll=x(Xo()),Vl=x(ys()),_l=({value:t,senderAddress:e,recipient:o,utxoState:{safeToSendUtxos:n},feerate:r,utxoHash:i,utxoIndex:l})=>{let c={transactionHash:i,index:l,value:t,isSafeToSend:!1,owner:e},d=[c],p=[{address:o,value:parseFloat(c.value),script:(0,Vl.toOutputScript)(o)}],m=un(Yo(Qt.Bitcoin.Mainnet,e),n,p,r,d),h=new Ll.Psbt({network:Nl.networks.bitcoin});if(m.type==="success"){let{inputs:g,outputs:y}=m;h.addInputs(g.map(C=>dn(C,e,!0))),h.addOutputs(y)}return[h,h.data.inputs.map((g,y)=>({address:e,signingIndexes:[y]})),m.vb]};s();a();var jl=x(Xo()),Fl=x(Xo()),$l=x(ys()),zl=({hash:t,index:e,value:o,senderAddress:n,recipient:r,utxoState:{safeToSendUtxos:i},feerate:l})=>{let c={index:e,transactionHash:t,value:o,isSafeToSend:!1,owner:n},d=[c],p=[{address:r,value:parseFloat(c.value),script:(0,$l.toOutputScript)(r)}],m=un(Yo(Qt.Bitcoin.Mainnet,n),i,p,l,d),h=new Fl.Psbt({network:jl.networks.bitcoin});if(m.type==="success"){let{inputs:y,outputs:C}=m;h.addInputs(y.map(S=>dn(S,n,!0))),h.addOutputs(C)}let g=h.data.inputs.map((y,C)=>({address:n,signingIndexes:[C]}));return[h,g,m.vb]};function Hl({chain:t,owner:e,chainData:o},{recipient:n,transactionSpeed:r="standard"},{utxoState:i,transactionSpeedsToUnitCost:l}){let c,d,p;if(!e)throw new Error("Owner is required");let m=t.id,h=l[r],g=o,y=h,C=Math.round(y?Ns(y.btcPerKilobyte).toNumber():Rs);if(Oa(g)){let{outputValue:S,utxoHash:v,utxoIndex:O}=g;[c,d,p]=_l({value:S,senderAddress:e,recipient:n,utxoState:i,feerate:C,utxoHash:v,utxoIndex:O})}else if(Bt(g)){let{utxoDetails:S}=g;[c,d,p]=zl({feerate:C,senderAddress:e,recipient:n,utxoState:i,hash:S.hash,index:S.index,value:S.value.toString()})}else throw new Error("Unsupported bitcoin transfer transaction");return{networkID:m,psbt:c,vb:p,psbtChain:void 0,inputsToSign:d}}s();a();s();a();var Jp=["function safeTransferFrom(address from, address to, uint256 tokenId)","function transferFrom(address from, address to, uint256 tokenId)"],Gl=new Error("Error populating ERC721 transaction data."),ql=async t=>{let{sender:e,networkID:o,destination:n,contractAddress:r,tokenID:i}=t,l=sn(o,r,Jp,e),c;try{let p=await l.populateTransaction.safeTransferFrom(e,n,new pe(i).toString(10));if(p.data)c=p.data;else throw Gl}catch{throw Gl}return mt.parse({type:"0x2",from:e,to:r,chainId:D.getEVMNetworkIDValue(o),data:c})};s();a();var Zp=["function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes data)","function transferFrom(address from, address to, uint256 id, uint256 amount, bytes data)"],Wl=new Error("Error populating ERC1155 transaction data."),Kl=async t=>{let{sender:e,networkID:o,destination:n,contractAddress:r,tokenID:i,value:l}=t,c=sn(o,r,Zp,e),d;try{let m=await c.populateTransaction.safeTransferFrom(e,n,new pe(i).toString(10),l.toString(10),[]);if(m.data)d=m.data;else throw Wl}catch{throw Wl}return mt.parse({type:"0x2",from:e,to:r,chainId:D.getEVMNetworkIDValue(o),data:d})};async function Ql({chain:t,chainData:e,owner:o},{recipient:n,amountAsset:r}){let i=e,l=t.id,c;if(em(i)){let{contract:d,id:p}=i;c=await ql({networkID:l,sender:o??"",destination:n,contractAddress:d,tokenID:p})}else if(tm(i)){let{contract:d,id:p}=i;c=await Kl({networkID:l,sender:o??"",destination:n,contractAddress:d,tokenID:p,value:r??"1"})}else throw new Error(`Unsupported EVM collectible type: ${i.standard}`);return{networkID:l,unsignedTransaction:c}}function em(t){return t.standard==="ERC721"}function tm(t){return t.standard==="ERC1155"}s();a();s();a();async function Xl({networkID:t,mint:e,recipient:o}){let n=new Ae.Transaction,r=await En({networkID:t,mintAddress:e});return n.add(await Bs({...r,destination:o})),n}s();a();async function Yl({networkID:t,destination:e,mint:o,senderAddress:n}){let{createComputeBudgetIx:r,createOCTferIX:i,getOCPMintState:l}=await nn(),c=Ze(t),d=new U.PublicKey(o),p=await l(d,c);if(!p)throw new Error("Mint state not found for OCP transfer");Ko()&&console.log("This is a Magic Eden Open Creator Protocol Token");let m=new Ae.Transaction;m.add(r());let{destinationAddress:h}=await mn({solanaConnection:c,destination:new U.PublicKey(e),mint:d,programId:wo}),g=new U.PublicKey(n.address),{initAccountIX:y,transferIX:C}=await i({senderAddress:g,destinationAddress:h,mintAddress:d,mintState:p,connection:c});return y&&m.add(y),m.add(C),m}s();a();async function Jl({networkID:t,senderAddress:e,senderAccount:o,destination:n,mint:r}){let i=Ze(t),l=new U.PublicKey(r),{destinationAddress:c,destinationAccount:d}=await mn({solanaConnection:i,destination:new U.PublicKey(n),mint:l,programId:wo}),{createPNFTTransferIX:p}=await nn(),m=new Ae.Transaction,h=new U.PublicKey(e.address),g=new U.PublicKey(o),y=d;if(!y){let[C,S]=await zs(h,c,l,wo);m.add($s({account:c,owner:U.SystemProgram.programId})),m.add(C),y=S}return m.add(await p({senderAddress:h,tokenAccount:g,destinationAddress:c,destinationAccount:y,mintAddress:l,connection:i})),m}async function Zl(t,e){let{chain:o,owner:n,decimals:r="0"}=t,i=parseFloat(r),{solana:l}=e,{memo:c,references:d}=l,p=o.id,m=Ze(p),h={networkID:t.chain.id,addressType:"solana",address:t.owner??""};if(!K(t.chainData))throw new Error("Chain data is not a SolanaCollectibleChainData");let g;if(om(t))g=await Xl({networkID:p,mint:t.chainData.mint,recipient:e.recipient});else if(nm(t))g=await Jl({networkID:p,senderAddress:h,senderAccount:t.chainData.tokenAccount,destination:e.recipient,mint:t.chainData.mint});else if(await rm(t))g=await Yl({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:h});else if(im(t)){let y=Ca(t),C=e.amountAsset.isZero()?"1":e.amountAsset.toFixed();g=await Ys({networkID:p,destination:e.recipient,mint:t.chainData.mint,senderAddress:h,senderAccount:t.chainData.tokenAccount,decimals:i,programId:t.chainData.programId,amount:C,references:d?.map(S=>S.toString())??[],memo:c??"",transferHookProgramId:y,connection:m})}else throw new Error("Unsupported transferSPLSolana args");return c&&g.add(Xs({memoText:c})),g.feePayer=new U.PublicKey(n??""),g=await cn(g,{connection:m}),g.recentBlockhash=(await m.getLatestBlockhash("confirmed")).blockhash,{networkID:p,transaction:[g]}}function om(t){return K(t.chainData)?"compression"in t.chainData&&!!t.chainData.compression?.compressed:!1}function nm(t){return K(t.chainData)?"standard"in t.chainData&&(t.chainData.standard==="ProgrammableNonFungible"||t.chainData.standard==="ProgrammableNonFungibleEdition"):!1}async function rm(t){let{chainData:e}=t;if(!K(e))return!1;let{mint:o}=e,n=Ze(t.chain.id);return await gr(new U.PublicKey(o),n)!==null}function im(t){return K(t.chainData)}s();a();s();a();s();a();s();a();var ec="1.21.2",tc="1.43.0";s();a();var sm={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"},Vn=class extends Error{},ao=class extends Vn{constructor(e,o){super(e),this.code=o,this.type=sm[o]??"ServerError"}},_n=class extends Vn{constructor(e,o,n){super(e),this.status=o,this.statusText=n}};s();a();var oc=t=>{throw TypeError(t)},ii=(t,e,o)=>e.has(t)||oc("Cannot "+o),ee=(t,e,o)=>(ii(t,e,"read from private field"),o?o.call(t):e.get(t)),Lt=(t,e,o)=>e.has(t)?oc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),lo=(t,e,o,n)=>(ii(t,e,"write to private field"),n?n.call(t,o):e.set(t,o),o),nc=(t,e,o)=>(ii(t,e,"access private method"),o),am=(t,e,o,n)=>({set _(r){lo(t,e,r,o)},get _(){return ee(t,e,n)}}),Vt,Uo,ot,_t,Oo,co,jn,rc,ic;function lm(t){let e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}var cm={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5},Fn=class{constructor(e,o={}){if(Lt(this,jn),Lt(this,Vt,0),Lt(this,Uo,0),Lt(this,ot,null),Lt(this,_t,null),Lt(this,Oo,new Set),Lt(this,co,new Map),this.endpoint=e,this.options={...cm,...o},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=lm(this.endpoint))}async makeRequest(e,o){let n=await nc(this,jn,rc).call(this);return new Promise((r,i)=>{lo(this,Vt,ee(this,Vt)+1),ee(this,co).set(ee(this,Vt),{resolve:r,reject:i,timeout:setTimeout(()=>{ee(this,co).delete(ee(this,Vt)),i(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:ee(this,Vt),method:e,params:o}))}).then(({error:r,result:i})=>{if(r)throw new ao(r.message,r.code);return i})}async subscribe(e){let o=new ri(e);return ee(this,Oo).add(o),await o.subscribe(this),()=>o.unsubscribe(this)}};Vt=new WeakMap;Uo=new WeakMap;ot=new WeakMap;_t=new WeakMap;Oo=new WeakMap;co=new WeakMap;jn=new WeakSet;rc=function(){return ee(this,_t)?ee(this,_t):(lo(this,_t,new Promise(t=>{ee(this,ot)?.close(),lo(this,ot,new this.options.WebSocketConstructor(this.endpoint)),ee(this,ot).addEventListener("open",()=>{lo(this,Uo,0),t(ee(this,ot))}),ee(this,ot).addEventListener("close",()=>{am(this,Uo)._++,ee(this,Uo)<=this.options.maxReconnects&&setTimeout(()=>{nc(this,jn,ic).call(this)},this.options.reconnectTimeout)}),ee(this,ot).addEventListener("message",({data:e})=>{let o;try{o=JSON.parse(e)}catch(n){console.error(new Error(`Failed to parse RPC message: ${e}`,{cause:n}));return}if("id"in o&&o.id!=null&&ee(this,co).has(o.id)){let{resolve:n,timeout:r}=ee(this,co).get(o.id);clearTimeout(r),n(o)}else if("params"in o){let{params:n}=o;ee(this,Oo).forEach(r=>{r.subscriptionId===n.subscription&&n.subscription===r.subscriptionId&&r.onMessage(n.result)})}})})),ee(this,_t))};ic=async function(){return ee(this,ot)?.close(),lo(this,_t,null),Promise.allSettled([...ee(this,Oo)].map(t=>t.subscribe(this)))};var ri=class{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:o}=this;return this.subscribed=!1,o==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[o]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let o=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=o)}};var sc=t=>{throw TypeError(t)},li=(t,e,o)=>e.has(t)||sc("Cannot "+o),Me=(t,e,o)=>(li(t,e,"read from private field"),o?o.call(t):e.get(t)),$n=(t,e,o)=>e.has(t)?sc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),si=(t,e,o,n)=>(li(t,e,"write to private field"),n?n.call(t,o):e.set(t,o),o),um=(t,e,o)=>(li(t,e,"access private method"),o),Bo,je,Mo,ai,ac,zn=class{constructor(e){$n(this,ai),$n(this,Bo,0),$n(this,je),$n(this,Mo),si(this,je,e)}fetch(e,o){let n=Me(this,je).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,o)}async request(e){si(this,Bo,Me(this,Bo)+1);let o=await this.fetch(Me(this,je).rpc?.url??Me(this,je).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":ec,"Client-Target-Api-Version":tc,"Client-Request-Method":e.method,...Me(this,je).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:Me(this,Bo),method:e.method,params:e.params})});if(!o.ok)throw new _n(`Unexpected status code: ${o.status}`,o.status,o.statusText);let n=await o.json();if("error"in n&&n.error!=null)throw new ao(n.error.message,n.error.code);return n.result}async subscribe(e){let o=await um(this,ai,ac).call(this).subscribe(e);return async()=>!!await o()}};Bo=new WeakMap;je=new WeakMap;Mo=new WeakMap;ai=new WeakSet;ac=function(){if(!Me(this,Mo)){let t=Me(this,je).WebSocketConstructor??WebSocket;if(!t)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");si(this,Mo,new Fn(Me(this,je).websocket?.url??Me(this,je).url,{WebSocketConstructor:t,...Me(this,je).websocket}))}return Me(this,Mo)};s();a();s();a();s();a();s();a();s();a();function dm(t){if(t.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let p=0;p<e.length;p++)e[p]=255;for(let p=0;p<t.length;p++){let m=t.charAt(p),h=m.charCodeAt(0);if(e[h]!==255)throw new TypeError(m+" is ambiguous");e[h]=p}let o=t.length,n=t.charAt(0),r=Math.log(o)/Math.log(256),i=Math.log(256)/Math.log(o);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";let m=0,h=0,g=0,y=p.length;for(;g!==y&&p[g]===0;)g++,m++;let C=(y-g)*i+1>>>0,S=new Uint8Array(C);for(;g!==y;){let V=p[g],I=0;for(let $=C-1;(V!==0||I<h)&&$!==-1;$--,I++)V+=256*S[$]>>>0,S[$]=V%o>>>0,V=V/o>>>0;if(V!==0)throw new Error("Non-zero carry");h=I,g++}let v=C-h;for(;v!==C&&S[v]===0;)v++;let O=n.repeat(m);for(;v<C;++v)O+=t.charAt(S[v]);return O}function c(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;let m=0,h=0,g=0;for(;p[m]===n;)h++,m++;let y=(p.length-m)*r+1>>>0,C=new Uint8Array(y);for(;p[m];){let V=e[p.charCodeAt(m)];if(V===255)return;let I=0;for(let $=y-1;(V!==0||I<g)&&$!==-1;$--,I++)V+=o*C[$]>>>0,C[$]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");g=I,m++}let S=y-g;for(;S!==y&&C[S]===0;)S++;let v=new Uint8Array(h+(y-S)),O=h;for(;S!==y;)v[O++]=C[S++];return v}function d(p){let m=c(p);if(m)return m;throw new Error("Non-base"+o+" character")}return{encode:l,decodeUnsafe:c,decode:d}}var lc=dm;var pm="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ci=lc(pm);var nt=t=>ci.encode(t),Fe=t=>ci.decode(t);s();a();function be(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}var ui=8192;function Q(t){if(t.length<ui)return btoa(String.fromCharCode(...t));let e="";for(var o=0;o<t.length;o+=ui){let n=t.slice(o,o+ui);e+=String.fromCharCode(...n)}return btoa(e)}s();a();s();a();function uo(t){let e=t.startsWith("0x")?t.slice(2):t,o=e.length%2===0?e:`0${e}`,n=o.match(/[0-9a-fA-F]{2}/g)?.map(r=>parseInt(r,16))??[];if(n.length!==o.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(n)}function Ye(t){return t.reduce((e,o)=>e+o.toString(16).padStart(2,"0"),"")}s();a();s();a();function jt(t){let e=[],o=0;if(t===0)return[0];for(;t>0;)e[o]=t&127,(t>>=7)&&(e[o]|=128),o+=1;return e}function cc(t){let e=0,o=0,n=0;for(;;){let r=t[n];if(n+=1,e|=(r&127)<<o,!(r&128))break;o+=7}return{value:e,length:n}}var Hn=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let o=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,o,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,o=new Uint8Array(this.dataView.buffer,e),{value:n,length:r}=cc(o);return this.shift(r),n}readVec(e){let o=this.readULEB(),n=[];for(let r=0;r<o;r++)n.push(e(this,r,o));return n}};s();a();s();a();function di(t,e){switch(e){case"base58":return nt(t);case"base64":return Q(t);case"hex":return Ye(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Gn(t,e=["<",">"]){let[o,n]=e,r=[],i="",l=0;for(let c=0;c<t.length;c++){let d=t[c];if(d===o&&l++,d===n&&l--,l===0&&d===","){r.push(i.trim()),i="";continue}i+=d}return r.push(i.trim()),r}var qn=class{constructor({initialSize:e=1024,maxSize:o=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=o,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let o=this.bytePosition+e;if(o>this.size){let n=Math.min(this.maxSize,this.size+this.allocateSize);if(o>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${o}`);this.size=n;let r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return pi(BigInt(e),8).forEach(o=>this.write8(o)),this}write128(e){return pi(BigInt(e),16).forEach(o=>this.write8(o)),this}write256(e){return pi(BigInt(e),32).forEach(o=>this.write8(o)),this}writeULEB(e){return jt(e).forEach(o=>this.write8(o)),this}writeVec(e,o){return this.writeULEB(e.length),Array.from(e).forEach((n,r)=>o(this,n,r,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return di(this.toBytes(),e)}};function pi(t,e){let o=new Uint8Array(e),n=0;for(;t>0;)o[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return o}var uc=t=>{throw TypeError(t)},dc=(t,e,o)=>e.has(t)||uc("Cannot "+o),$e=(t,e,o)=>(dc(t,e,"read from private field"),o?o.call(t):e.get(t)),Kn=(t,e,o)=>e.has(t)?uc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),Qn=(t,e,o,n)=>(dc(t,e,"write to private field"),n?n.call(t,o):e.set(t,o),o),po,Do,Wn,wt,mm=class pc{constructor(e){Kn(this,po),Kn(this,Do),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Qn(this,po,e.write),Qn(this,Do,e.serialize??((o,n)=>{let r=new qn({initialSize:this.serializedSize(o)??void 0,...n});return $e(this,po).call(this,o,r),r.toBytes()})),this.validate=e.validate??(()=>{})}write(e,o){this.validate(e),$e(this,po).call(this,e,o)}serialize(e,o){return this.validate(e),new Xn(this,$e(this,Do).call(this,e,o))}parse(e){let o=new Hn(e);return this.read(o)}fromHex(e){return this.parse(uo(e))}fromBase58(e){return this.parse(Fe(e))}fromBase64(e){return this.parse(be(e))}transform({name:e,input:o,output:n,validate:r}){return new pc({name:e??this.name,read:i=>n?n(this.read(i)):this.read(i),write:(i,l)=>$e(this,po).call(this,o?o(i):i,l),serializedSize:i=>this.serializedSize(o?o(i):i),serialize:(i,l)=>$e(this,Do).call(this,o?o(i):i,l),validate:i=>{r?.(i),this.validate(o?o(i):i)}})}};po=new WeakMap;Do=new WeakMap;var De=mm,mc=Symbol.for("@mysten/serialized-bcs");function mo(t){return!!t&&typeof t=="object"&&t[mc]===!0}var Xn=class{constructor(e,o){Kn(this,Wn),Kn(this,wt),Qn(this,Wn,e),Qn(this,wt,o)}get[mc](){return!0}toBytes(){return $e(this,wt)}toHex(){return Ye($e(this,wt))}toBase64(){return Q($e(this,wt))}toBase58(){return nt($e(this,wt))}parse(){return $e(this,Wn).parse($e(this,wt))}};Wn=new WeakMap;wt=new WeakMap;function Ro({size:t,...e}){return new De({...e,serializedSize:()=>t})}function Yn({readMethod:t,writeMethod:e,...o}){return Ro({...o,read:n=>n[t](),write:(n,r)=>r[e](n),validate:n=>{if(n<0||n>o.maxValue)throw new TypeError(`Invalid ${o.name} value: ${n}. Expected value in range 0-${o.maxValue}`);o.validate?.(n)}})}function Jn({readMethod:t,writeMethod:e,...o}){return Ro({...o,read:n=>n[t](),write:(n,r)=>r[e](BigInt(n)),validate:n=>{let r=BigInt(n);if(r<0||r>o.maxValue)throw new TypeError(`Invalid ${o.name} value: ${r}. Expected value in range 0-${o.maxValue}`);o.validate?.(r)}})}function fc({serialize:t,...e}){let o=new De({...e,serialize:t,write:(n,r)=>{for(let i of o.serialize(n).toBytes())r.write8(i)}});return o}function hc({toBytes:t,fromBytes:e,...o}){return new De({...o,read:n=>{let r=n.readULEB(),i=n.readBytes(r);return e(i)},write:(n,r)=>{let i=t(n);r.writeULEB(i.length);for(let l=0;l<i.length;l++)r.write8(i[l])},serialize:n=>{let r=t(n),i=jt(r.length),l=new Uint8Array(i.length+r.length);return l.set(i,0),l.set(r,i.length),l},validate:n=>{if(typeof n!="string")throw new TypeError(`Invalid ${o.name} value: ${n}. Expected string`);o.validate?.(n)}})}function bc(t){let e=null;function o(){return e||(e=t()),e}return new De({name:"lazy",read:n=>o().read(n),serializedSize:n=>o().serializedSize(n),write:(n,r)=>o().write(n,r),serialize:(n,r)=>o().serialize(n,r).toBytes()})}s();a();var u={u8(t){return Yn({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return Yn({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return Yn({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Jn({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Jn({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Jn({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Ro({name:"bool",size:1,read:e=>e.read8()===1,write:(e,o)=>o.write8(e?1:0),...t,validate:e=>{if(t?.validate?.(e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return fc({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(jt(e)),...t})},bytes(t,e){return Ro({name:`bytes[${t}]`,size:t,read:o=>o.readBytes(t),write:(o,n)=>{let r=new Uint8Array(o);for(let i=0;i<t;i++)n.write8(r[i]??0)},...e,validate:o=>{if(e?.validate?.(o),!o||typeof o!="object"||!("length"in o))throw new TypeError(`Expected array, found ${typeof o}`);if(o.length!==t)throw new TypeError(`Expected array of length ${t}, found ${o.length}`)}})},byteVector(t){return new De({name:"bytesVector",read:e=>{let o=e.readULEB();return e.readBytes(o)},write:(e,o)=>{let n=new Uint8Array(e);o.writeULEB(n.length);for(let r=0;r<n.length;r++)o.write8(n[r]??0)},...t,serializedSize:e=>{let o="length"in e?e.length:null;return o==null?null:jt(o).length+o},validate:e=>{if(t?.validate?.(e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(t){return hc({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,o){return new De({name:`${e.name}[${t}]`,read:n=>{let r=new Array(t);for(let i=0;i<t;i++)r[i]=e.read(n);return r},write:(n,r)=>{for(let i of n)e.write(i,r)},...o,validate:n=>{if(o?.validate?.(n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return u.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new De({name:`vector<${t.name}>`,read:o=>{let n=o.readULEB(),r=new Array(n);for(let i=0;i<n;i++)r[i]=t.read(o);return r},write:(o,n)=>{n.writeULEB(o.length);for(let r of o)t.write(r,n)},...e,validate:o=>{if(e?.validate?.(o),!o||typeof o!="object"||!("length"in o))throw new TypeError(`Expected array, found ${typeof o}`)}})},tuple(t,e){return new De({name:`(${t.map(o=>o.name).join(", ")})`,serializedSize:o=>{let n=0;for(let r=0;r<t.length;r++){let i=t[r].serializedSize(o[r]);if(i==null)return null;n+=i}return n},read:o=>{let n=[];for(let r of t)n.push(r.read(o));return n},write:(o,n)=>{for(let r=0;r<t.length;r++)t[r].write(o[r],n)},...e,validate:o=>{if(e?.validate?.(o),!Array.isArray(o))throw new TypeError(`Expected array, found ${typeof o}`);if(o.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${o.length}`)}})},struct(t,e,o){let n=Object.entries(e);return new De({name:t,serializedSize:r=>{let i=0;for(let[l,c]of n){let d=c.serializedSize(r[l]);if(d==null)return null;i+=d}return i},read:r=>{let i={};for(let[l,c]of n)i[l]=c.read(r);return i},write:(r,i)=>{for(let[l,c]of n)c.write(r[l],i)},...o,validate:r=>{if(o?.validate?.(r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`)}})},enum(t,e,o){let n=Object.entries(e);return new De({name:t,read:r=>{let i=r.readULEB(),l=n[i];if(!l)throw new TypeError(`Unknown value ${i} for enum ${t}`);let[c,d]=l;return{[c]:d?.read(r)??!0,$kind:c}},write:(r,i)=>{let[l,c]=Object.entries(r).filter(([d])=>Object.hasOwn(e,d))[0];for(let d=0;d<n.length;d++){let[p,m]=n[d];if(p===l){i.writeULEB(d),m?.write(c,i);return}}},...o,validate:r=>{if(o?.validate?.(r),typeof r!="object"||r==null)throw new TypeError(`Expected object, found ${typeof r}`);let i=Object.keys(r).filter(c=>r[c]!==void 0&&Object.hasOwn(e,c));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${t}}`);let[l]=i;if(!Object.hasOwn(e,l))throw new TypeError(`Invalid enum variant ${l}`)}})},map(t,e){return u.vector(u.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:o=>[...o.entries()],output:o=>{let n=new Map;for(let[r,i]of o)n.set(r,i);return n}})},lazy(t){return bc(t)}};s();a();s();a();s();a();s();a();s();a();var fm=32;function Zn(t){try{return Fe(t).length===fm}catch{return!1}}var No=32;function Pe(t){return hm(t)&&bm(t)===No}function fo(t){return Pe(t)}function M(t,e=!1){let o=t.toLowerCase();return!e&&o.startsWith("0x")&&(o=o.slice(2)),`0x${o.padStart(No*2,"0")}`}function ve(t,e=!1){return M(t,e)}function hm(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function bm(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}s();a();var ym=/^vector<(.+)>$/,gm=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,rt=class t{static parseFromStr(e,o=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};let n=e.match(ym);if(n)return{vector:t.parseFromStr(n[1],o)};let r=e.match(gm);if(r)return{struct:{address:o?M(r[1]):r[1],module:r[2],name:r[3],typeParams:r[5]===void 0?[]:t.parseStructTypeArgs(r[5],o)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,o=!1){return Gn(e).map(n=>t.parseFromStr(n,o))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${t.tagToString(e.vector)}>`;if("struct"in e){let o=e.struct,n=o.typeParams.map(t.tagToString).join(", ");return`${o.address}::${o.module}::${o.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function Cm(t){return u.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Sm(t){return u.enum("Option",{None:null,Some:t})}var H=u.bytes(No).transform({validate:t=>{let e=typeof t=="string"?t:Ye(t);if(!e||!Pe(M(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?uo(M(t)):t,output:t=>M(Ye(t))}),ke=u.vector(u.u8()).transform({name:"ObjectDigest",input:t=>Fe(t),output:t=>nt(new Uint8Array(t)),validate:t=>{if(Fe(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Ie=u.struct("SuiObjectRef",{objectId:H,version:u.u64(),digest:ke}),mi=u.struct("SharedObjectRef",{objectId:H,initialSharedVersion:u.u64(),mutable:u.bool()}),fi=u.enum("ObjectArg",{ImmOrOwnedObject:Ie,SharedObject:mi,Receiving:Ie}),hi=u.enum("CallArg",{Pure:u.struct("Pure",{bytes:u.vector(u.u8()).transform({input:t=>typeof t=="string"?be(t):t,output:t=>Q(new Uint8Array(t))})}),Object:fi}),bi=u.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:u.lazy(()=>bi),struct:u.lazy(()=>Ti),u16:null,u32:null,u256:null}),er=bi.transform({input:t=>typeof t=="string"?rt.parseFromStr(t,!0):t,output:t=>rt.tagToString(t)}),ze=u.enum("Argument",{GasCoin:null,Input:u.u16(),Result:u.u16(),NestedResult:u.tuple([u.u16(),u.u16()])}),yi=u.struct("ProgrammableMoveCall",{package:H,module:u.string(),function:u.string(),typeArguments:u.vector(er),arguments:u.vector(ze)}),gi=u.enum("Command",{MoveCall:yi,TransferObjects:u.struct("TransferObjects",{objects:u.vector(ze),address:ze}),SplitCoins:u.struct("SplitCoins",{coin:ze,amounts:u.vector(ze)}),MergeCoins:u.struct("MergeCoins",{destination:ze,sources:u.vector(ze)}),Publish:u.struct("Publish",{modules:u.vector(u.vector(u.u8()).transform({input:t=>typeof t=="string"?be(t):t,output:t=>Q(new Uint8Array(t))})),dependencies:u.vector(H)}),MakeMoveVec:u.struct("MakeMoveVec",{type:Sm(er).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:u.vector(ze)}),Upgrade:u.struct("Upgrade",{modules:u.vector(u.vector(u.u8()).transform({input:t=>typeof t=="string"?be(t):t,output:t=>Q(new Uint8Array(t))})),dependencies:u.vector(H),package:H,ticket:ze})}),Ci=u.struct("ProgrammableTransaction",{inputs:u.vector(hi),commands:u.vector(gi)}),Si=u.enum("TransactionKind",{ProgrammableTransaction:Ci,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),wi=u.enum("TransactionExpiration",{None:null,Epoch:Cm()}),Ti=u.struct("StructTag",{address:H,module:u.string(),name:u.string(),typeParams:u.vector(bi)}),xi=u.struct("GasData",{payment:u.vector(Ie),owner:H,price:u.u64(),budget:u.u64()}),vi=u.struct("TransactionDataV1",{kind:Si,sender:H,gasData:xi,expiration:wi}),Ii=u.enum("TransactionData",{V1:vi}),Ai=u.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Ei=u.enum("IntentVersion",{V0:null}),Pi=u.enum("AppId",{Sui:null}),ki=u.struct("Intent",{scope:Ai,version:Ei,appId:Pi});function Ui(t){return u.struct(`IntentMessage<${t.name}>`,{intent:ki,value:t})}var Oi=u.enum("CompressedSignature",{ED25519:u.fixedArray(64,u.u8()),Secp256k1:u.fixedArray(64,u.u8()),Secp256r1:u.fixedArray(64,u.u8()),ZkLogin:u.vector(u.u8())}),Bi=u.enum("PublicKey",{ED25519:u.fixedArray(32,u.u8()),Secp256k1:u.fixedArray(33,u.u8()),Secp256r1:u.fixedArray(33,u.u8()),ZkLogin:u.vector(u.u8())}),Mi=u.struct("MultiSigPkMap",{pubKey:Bi,weight:u.u8()}),Di=u.struct("MultiSigPublicKey",{pk_map:u.vector(Mi),threshold:u.u16()}),yc=u.struct("MultiSig",{sigs:u.vector(Oi),bitmap:u.u16(),multisig_pk:Di}),wm=u.vector(u.u8()).transform({input:t=>typeof t=="string"?be(t):t,output:t=>Q(new Uint8Array(t))}),Ri=u.struct("SenderSignedTransaction",{intentMessage:Ui(Ii),txSignatures:u.vector(wm)}),gc=u.vector(Ri,{name:"SenderSignedData"}),Cc=u.struct("PasskeyAuthenticator",{authenticatorData:u.vector(u.u8()),clientDataJson:u.string(),userSignature:u.vector(u.u8())});s();a();var Tm=u.enum("PackageUpgradeError",{UnableToFetchPackage:u.struct("UnableToFetchPackage",{packageId:H}),NotAPackage:u.struct("NotAPackage",{objectId:H}),IncompatibleUpgrade:null,DigestDoesNotMatch:u.struct("DigestDoesNotMatch",{digest:u.vector(u.u8())}),UnknownUpgradePolicy:u.struct("UnknownUpgradePolicy",{policy:u.u8()}),PackageIDDoesNotMatch:u.struct("PackageIDDoesNotMatch",{packageId:H,ticketId:H})}),xm=u.struct("ModuleId",{address:H,name:u.string()}),Sc=u.struct("MoveLocation",{module:xm,function:u.u16(),instruction:u.u16(),functionName:u.option(u.string())}),vm=u.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:u.struct("IndexOutOfBounds",{idx:u.u16()}),SecondaryIndexOutOfBounds:u.struct("SecondaryIndexOutOfBounds",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidResultArity:u.struct("InvalidResultArity",{resultIdx:u.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Im=u.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Am=u.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:u.struct("MoveObjectTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),MovePackageTooBig:u.struct("MovePackageTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),CircularObjectOwnership:u.struct("CircularObjectOwnership",{object:H}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:u.option(Sc),MoveAbort:u.tuple([Sc,u.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:u.struct("CommandArgumentError",{argIdx:u.u16(),kind:vm}),TypeArgumentError:u.struct("TypeArgumentError",{argumentIdx:u.u16(),kind:Im}),UnusedValueWithoutDrop:u.struct("UnusedValueWithoutDrop",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidPublicFunctionReturnType:u.struct("InvalidPublicFunctionReturnType",{idx:u.u16()}),InvalidTransferObject:null,EffectsTooLarge:u.struct("EffectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:u.struct("PackageUpgradeError",{upgradeError:Tm}),WrittenObjectsTooLarge:u.struct("WrittenObjectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:u.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:u.vector(H)}),AddressDeniedForCoin:u.struct("AddressDeniedForCoin",{address:H,coinType:u.string()}),CoinTypeGlobalPause:u.struct("CoinTypeGlobalPause",{coinType:u.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),wc=u.enum("ExecutionStatus",{Success:null,Failed:u.struct("ExecutionFailed",{error:Am,command:u.option(u.u64())})}),Tc=u.struct("GasCostSummary",{computationCost:u.u64(),storageCost:u.u64(),storageRebate:u.u64(),nonRefundableStorageFee:u.u64()}),ho=u.enum("Owner",{AddressOwner:H,ObjectOwner:H,Shared:u.struct("Shared",{initialSharedVersion:u.u64()}),Immutable:null}),Em=u.struct("TransactionEffectsV1",{status:wc,executedEpoch:u.u64(),gasUsed:Tc,modifiedAtVersions:u.vector(u.tuple([H,u.u64()])),sharedObjects:u.vector(Ie),transactionDigest:ke,created:u.vector(u.tuple([Ie,ho])),mutated:u.vector(u.tuple([Ie,ho])),unwrapped:u.vector(u.tuple([Ie,ho])),deleted:u.vector(Ie),unwrappedThenDeleted:u.vector(Ie),wrapped:u.vector(Ie),gasObject:u.tuple([Ie,ho]),eventsDigest:u.option(ke),dependencies:u.vector(ke)}),Ni=u.tuple([u.u64(),ke]),Pm=u.enum("ObjectIn",{NotExist:null,Exist:u.tuple([Ni,ho])}),km=u.enum("ObjectOut",{NotExist:null,ObjectWrite:u.tuple([ke,ho]),PackageWrite:Ni}),Um=u.enum("IDOperation",{None:null,Created:null,Deleted:null}),Om=u.struct("EffectsObjectChange",{inputState:Pm,outputState:km,idOperation:Um}),Bm=u.enum("UnchangedSharedKind",{ReadOnlyRoot:Ni,MutateDeleted:u.u64(),ReadDeleted:u.u64(),Cancelled:u.u64(),PerEpochConfig:null}),Mm=u.struct("TransactionEffectsV2",{status:wc,executedEpoch:u.u64(),gasUsed:Tc,transactionDigest:ke,gasObjectIndex:u.option(u.u32()),eventsDigest:u.option(ke),dependencies:u.vector(ke),lamportVersion:u.u64(),changedObjects:u.vector(u.tuple([H,Om])),unchangedSharedObjects:u.vector(u.tuple([H,Bm])),auxDataDigest:u.option(ke)}),xc=u.enum("TransactionEffects",{V1:Em,V2:Mm});s();a();function bo(t){switch(t){case"u8":return u.u8();case"u16":return u.u16();case"u32":return u.u32();case"u64":return u.u64();case"u128":return u.u128();case"u256":return u.u256();case"bool":return u.bool();case"string":return u.string();case"id":case"address":return H}let e=t.match(/^(vector|option)<(.+)>$/);if(e){let[o,n]=e.slice(1);return o==="vector"?u.vector(bo(n)):u.option(bo(n))}throw new Error(`Invalid Pure type name: ${t}`)}var R={...u,U8:u.u8(),U16:u.u16(),U32:u.u32(),U64:u.u64(),U128:u.u128(),U256:u.u256(),ULEB128:u.uleb128(),Bool:u.bool(),String:u.string(),Address:H,AppId:Pi,Argument:ze,CallArg:hi,CompressedSignature:Oi,GasData:xi,Intent:ki,IntentMessage:Ui,IntentScope:Ai,IntentVersion:Ei,MultiSig:yc,MultiSigPkMap:Mi,MultiSigPublicKey:Di,ObjectArg:fi,ObjectDigest:ke,ProgrammableMoveCall:yi,ProgrammableTransaction:Ci,PublicKey:Bi,SenderSignedData:gc,SenderSignedTransaction:Ri,SharedObjectRef:mi,StructTag:Ti,SuiObjectRef:Ie,Command:gi,TransactionData:Ii,TransactionDataV1:vi,TransactionExpiration:wi,TransactionKind:Si,TypeTag:er,TransactionEffects:xc,PasskeyAuthenticator:Cc};s();a();s();a();var Dm=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Rm=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function vc(t,e="at"){let o=t.toLowerCase(),n;if(o.includes("@")){if(!Dm.test(o))throw new Error(`Invalid SuiNS name ${t}`);let[r,i]=o.split("@");n=[...r?r.split("."):[],i]}else{if(!Rm.test(o))throw new Error(`Invalid SuiNS name ${t}`);n=o.split(".").slice(0,-1)}return e==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}s();a();var Nm=BigInt(1e9),Li="0x1",tr="0x2";var Lm=ve("0x6");var Vi=`${tr}::sui::SUI`,Vm=ve("0x5");s();a();s();a();s();a();function or(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function _m(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function _i(t,...e){if(!_m(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function ji(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ic(t,e){_i(t);let o=e.outputLen;if(t.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}s();a();var yo=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));var Tt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Ac=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,He=Tt?t=>t:t=>Ac(t);function Ft(t){for(let e=0;e<t.length;e++)t[e]=Ac(t[e])}function jm(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function $t(t){return typeof t=="string"&&(t=jm(t)),_i(t),t}var nr=class{clone(){return this._cloneInto()}},MP={}.toString;function Ec(t){let e=(n,r)=>t(r).update($t(n)).digest(),o=t({});return e.outputLen=o.outputLen,e.blockLen=o.blockLen,e.create=n=>t(n),e}var Pc=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),rr=class extends nr{constructor(e,o,n={},r,i,l){if(super(),this.blockLen=e,this.outputLen=o,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,or(e),or(o),or(r),o<0||o>r)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>r))throw new Error(`key must be up 1..${r} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==i)throw new Error(`salt must be ${i} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==l)throw new Error(`personalization must be ${l} byte long or undefined`);this.buffer32=yo(this.buffer=new Uint8Array(e))}update(e){ji(this);let{blockLen:o,buffer:n,buffer32:r}=this;e=$t(e);let i=e.length,l=e.byteOffset,c=e.buffer;for(let d=0;d<i;){this.pos===o&&(Tt||Ft(r),this.compress(r,0,!1),Tt||Ft(r),this.pos=0);let p=Math.min(o-this.pos,i-d),m=l+d;if(p===o&&!(m%4)&&d+p<i){let h=new Uint32Array(c,m,Math.floor((i-d)/4));Tt||Ft(h);for(let g=0;d+o<i;g+=r.length,d+=o)this.length+=o,this.compress(h,g,!1);Tt||Ft(h);continue}n.set(e.subarray(d,d+p),this.pos),this.pos+=p,this.length+=p,d+=p}return this}digestInto(e){ji(this),Ic(e,this);let{pos:o,buffer32:n}=this;this.finished=!0,this.buffer.subarray(o).fill(0),Tt||Ft(n),this.compress(n,0,!0),Tt||Ft(n);let r=yo(e);this.get().forEach((i,l)=>r[l]=He(i))}digest(){let{buffer:e,outputLen:o}=this;this.digestInto(e);let n=e.slice(0,o);return this.destroy(),n}_cloneInto(e){let{buffer:o,length:n,finished:r,destroyed:i,outputLen:l,pos:c}=this;return e||(e=new this.constructor({dkLen:l})),e.set(...this.get()),e.length=n,e.finished=r,e.destroyed=i,e.outputLen=l,e.buffer.set(o),e.pos=c,e}};s();a();var ir=BigInt(4294967295),Fi=BigInt(32);function kc(t,e=!1){return e?{h:Number(t&ir),l:Number(t>>Fi&ir)}:{h:Number(t>>Fi&ir)|0,l:Number(t&ir)|0}}function Fm(t,e=!1){let o=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let r=0;r<t.length;r++){let{h:i,l}=kc(t[r],e);[o[r],n[r]]=[i,l]}return[o,n]}var $m=(t,e)=>BigInt(t>>>0)<<Fi|BigInt(e>>>0),zm=(t,e,o)=>t>>>o,Hm=(t,e,o)=>t<<32-o|e>>>o,Gm=(t,e,o)=>t>>>o|e<<32-o,qm=(t,e,o)=>t<<32-o|e>>>o,Wm=(t,e,o)=>t<<64-o|e>>>o-32,Km=(t,e,o)=>t>>>o-32|e<<64-o,Qm=(t,e)=>e,Xm=(t,e)=>t,Ym=(t,e,o)=>t<<o|e>>>32-o,Jm=(t,e,o)=>e<<o|t>>>32-o,Zm=(t,e,o)=>e<<o-32|t>>>64-o,ef=(t,e,o)=>t<<o-32|e>>>64-o;function tf(t,e,o,n){let r=(e>>>0)+(n>>>0);return{h:t+o+(r/2**32|0)|0,l:r|0}}var of=(t,e,o)=>(t>>>0)+(e>>>0)+(o>>>0),nf=(t,e,o,n)=>e+o+n+(t/2**32|0)|0,rf=(t,e,o,n)=>(t>>>0)+(e>>>0)+(o>>>0)+(n>>>0),sf=(t,e,o,n,r)=>e+o+n+r+(t/2**32|0)|0,af=(t,e,o,n,r)=>(t>>>0)+(e>>>0)+(o>>>0)+(n>>>0)+(r>>>0),lf=(t,e,o,n,r,i)=>e+o+n+r+i+(t/2**32|0)|0;var cf={fromBig:kc,split:Fm,toBig:$m,shrSH:zm,shrSL:Hm,rotrSH:Gm,rotrSL:qm,rotrBH:Wm,rotrBL:Km,rotr32H:Qm,rotr32L:Xm,rotlSH:Ym,rotlSL:Jm,rotlBH:Zm,rotlBL:ef,add:tf,add3L:of,add3H:nf,add4L:rf,add4H:sf,add5H:lf,add5L:af},ye=cf;var ce=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),T=new Uint32Array(32);function xt(t,e,o,n,r,i){let l=r[i],c=r[i+1],d=T[2*t],p=T[2*t+1],m=T[2*e],h=T[2*e+1],g=T[2*o],y=T[2*o+1],C=T[2*n],S=T[2*n+1],v=ye.add3L(d,m,l);p=ye.add3H(v,p,h,c),d=v|0,{Dh:S,Dl:C}={Dh:S^p,Dl:C^d},{Dh:S,Dl:C}={Dh:ye.rotr32H(S,C),Dl:ye.rotr32L(S,C)},{h:y,l:g}=ye.add(y,g,S,C),{Bh:h,Bl:m}={Bh:h^y,Bl:m^g},{Bh:h,Bl:m}={Bh:ye.rotrSH(h,m,24),Bl:ye.rotrSL(h,m,24)},T[2*t]=d,T[2*t+1]=p,T[2*e]=m,T[2*e+1]=h,T[2*o]=g,T[2*o+1]=y,T[2*n]=C,T[2*n+1]=S}function vt(t,e,o,n,r,i){let l=r[i],c=r[i+1],d=T[2*t],p=T[2*t+1],m=T[2*e],h=T[2*e+1],g=T[2*o],y=T[2*o+1],C=T[2*n],S=T[2*n+1],v=ye.add3L(d,m,l);p=ye.add3H(v,p,h,c),d=v|0,{Dh:S,Dl:C}={Dh:S^p,Dl:C^d},{Dh:S,Dl:C}={Dh:ye.rotrSH(S,C,16),Dl:ye.rotrSL(S,C,16)},{h:y,l:g}=ye.add(y,g,S,C),{Bh:h,Bl:m}={Bh:h^y,Bl:m^g},{Bh:h,Bl:m}={Bh:ye.rotrBH(h,m,63),Bl:ye.rotrBL(h,m,63)},T[2*t]=d,T[2*t+1]=p,T[2*e]=m,T[2*e+1]=h,T[2*o]=g,T[2*o+1]=y,T[2*n]=C,T[2*n+1]=S}var $i=class extends rr{constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=ce[0]|0,this.v0h=ce[1]|0,this.v1l=ce[2]|0,this.v1h=ce[3]|0,this.v2l=ce[4]|0,this.v2h=ce[5]|0,this.v3l=ce[6]|0,this.v3h=ce[7]|0,this.v4l=ce[8]|0,this.v4h=ce[9]|0,this.v5l=ce[10]|0,this.v5h=ce[11]|0,this.v6l=ce[12]|0,this.v6h=ce[13]|0,this.v7l=ce[14]|0,this.v7h=ce[15]|0;let o=e.key?e.key.length:0;if(this.v0l^=this.outputLen|o<<8|65536|1<<24,e.salt){let n=yo($t(e.salt));this.v4l^=He(n[0]),this.v4h^=He(n[1]),this.v5l^=He(n[2]),this.v5h^=He(n[3])}if(e.personalization){let n=yo($t(e.personalization));this.v6l^=He(n[0]),this.v6h^=He(n[1]),this.v7l^=He(n[2]),this.v7h^=He(n[3])}if(e.key){let n=new Uint8Array(this.blockLen);n.set($t(e.key)),this.update(n)}}get(){let{v0l:e,v0h:o,v1l:n,v1h:r,v2l:i,v2h:l,v3l:c,v3h:d,v4l:p,v4h:m,v5l:h,v5h:g,v6l:y,v6h:C,v7l:S,v7h:v}=this;return[e,o,n,r,i,l,c,d,p,m,h,g,y,C,S,v]}set(e,o,n,r,i,l,c,d,p,m,h,g,y,C,S,v){this.v0l=e|0,this.v0h=o|0,this.v1l=n|0,this.v1h=r|0,this.v2l=i|0,this.v2h=l|0,this.v3l=c|0,this.v3h=d|0,this.v4l=p|0,this.v4h=m|0,this.v5l=h|0,this.v5h=g|0,this.v6l=y|0,this.v6h=C|0,this.v7l=S|0,this.v7h=v|0}compress(e,o,n){this.get().forEach((d,p)=>T[p]=d),T.set(ce,16);let{h:r,l:i}=ye.fromBig(BigInt(this.length));T[24]=ce[8]^i,T[25]=ce[9]^r,n&&(T[28]=~T[28],T[29]=~T[29]);let l=0,c=Pc;for(let d=0;d<12;d++)xt(0,4,8,12,e,o+2*c[l++]),vt(0,4,8,12,e,o+2*c[l++]),xt(1,5,9,13,e,o+2*c[l++]),vt(1,5,9,13,e,o+2*c[l++]),xt(2,6,10,14,e,o+2*c[l++]),vt(2,6,10,14,e,o+2*c[l++]),xt(3,7,11,15,e,o+2*c[l++]),vt(3,7,11,15,e,o+2*c[l++]),xt(0,5,10,15,e,o+2*c[l++]),vt(0,5,10,15,e,o+2*c[l++]),xt(1,6,11,12,e,o+2*c[l++]),vt(1,6,11,12,e,o+2*c[l++]),xt(2,7,8,13,e,o+2*c[l++]),vt(2,7,8,13,e,o+2*c[l++]),xt(3,4,9,14,e,o+2*c[l++]),vt(3,4,9,14,e,o+2*c[l++]);this.v0l^=T[0]^T[16],this.v0h^=T[1]^T[17],this.v1l^=T[2]^T[18],this.v1h^=T[3]^T[19],this.v2l^=T[4]^T[20],this.v2h^=T[5]^T[21],this.v3l^=T[6]^T[22],this.v3h^=T[7]^T[23],this.v4l^=T[8]^T[24],this.v4h^=T[9]^T[25],this.v5l^=T[10]^T[26],this.v5h^=T[11]^T[27],this.v6l^=T[12]^T[28],this.v6h^=T[13]^T[29],this.v7l^=T[14]^T[30],this.v7h^=T[15]^T[31],T.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Uc=Ec(t=>new $i(t));var uf="object",df="ID",pf="ascii",mf="String",ff="string",hf="String",bf="option",yf="Option";function Oc(t){let e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&M(e.package)===M("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function sr(t){if(typeof t=="string")switch(t){case"address":return R.Address;case"bool":return R.Bool;case"u8":return R.U8;case"u16":return R.U16;case"u32":return R.U32;case"u64":return R.U64;case"u128":return R.U128;case"u256":return R.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return R.vector(R.U8).transform({input:o=>typeof o=="string"?new TextEncoder().encode(o):o,output:o=>o});let e=sr(t.vector);return e?R.vector(e):null}if("datatype"in t){let e=M(t.datatype.package);if(e===M(Li)){if(t.datatype.module===pf&&t.datatype.type===mf)return R.String;if(t.datatype.module===ff&&t.datatype.type===hf)return R.String;if(t.datatype.module===bf&&t.datatype.type===yf){let o=sr(t.datatype.typeParameters[0]);return o?R.vector(o):null}}if(e===M(tr)&&t.datatype.module===uf&&t.datatype.type===df)return R.Address}return null}function Bc(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:Lo(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:Lo(t.MutableReference)}:{ref:null,body:Lo(t)}}function Lo(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:Lo(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(Lo)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}s();a();function gf(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?Q(t):t.toBase64()}}}var Ge={Pure:gf,ObjectRef({objectId:t,digest:e,version:o}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:o,objectId:M(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:o}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:o,objectId:M(t)}}}},ReceivingRef({objectId:t,digest:e,version:o}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:o,objectId:M(t)}}}}};s();a();s();a();function At(t){let e=Object.entries(t).map(([o,n])=>w({[o]:n}));return F(le(e),an(o=>({...o,$kind:Object.keys(o)[0]})))}var zt=F(k(),an(t=>M(t)),Yt(Pe)),Ce=zt,It=k(),ge=F(le([k(),F(q(),W())]),Yt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),qe=w({objectId:zt,version:ge,digest:k()}),G=F(le([w({GasCoin:E(!0)}),w({Input:F(q(),W()),type:ue(E("pure"))}),w({Input:F(q(),W()),type:ue(E("object"))}),w({Result:F(q(),W())}),w({NestedResult:ln([F(q(),W()),F(q(),W())])})]),an(t=>({...t,$kind:Object.keys(t)[0]}))),Cf=w({budget:_(ge),price:_(ge),owner:_(zt),payment:_(A(qe))}),Sk=w({address:k(),module:k(),name:k(),typeParams:A(k())}),zi=le([E("address"),E("bool"),E("u8"),E("u16"),E("u32"),E("u64"),E("u128"),E("u256"),w({vector:Zt(()=>zi)}),w({datatype:w({package:k(),module:k(),type:k(),typeParameters:A(Zt(()=>zi))})}),w({typeParameter:F(q(),W())})]),Sf=w({ref:_(le([E("&"),E("&mut")])),body:zi}),wf=w({package:Ce,module:k(),function:k(),typeArguments:A(k()),arguments:A(G),_argumentTypes:ue(_(A(Sf)))}),Tf=w({name:k(),inputs:eo(k(),le([G,A(G)])),data:eo(k(),Je())}),xf=At({MoveCall:wf,TransferObjects:w({objects:A(G),address:G}),SplitCoins:w({coin:G,amounts:A(G)}),MergeCoins:w({destination:G,sources:A(G)}),Publish:w({modules:A(It),dependencies:A(Ce)}),MakeMoveVec:w({type:_(k()),elements:A(G)}),Upgrade:w({modules:A(It),dependencies:A(Ce),package:Ce,ticket:G}),$Intent:Tf}),Mc=At({ImmOrOwnedObject:qe,SharedObject:w({objectId:Ce,initialSharedVersion:ge,mutable:Jt()}),Receiving:qe}),vf=At({Object:Mc,Pure:w({bytes:It}),UnresolvedPure:w({value:Je()}),UnresolvedObject:w({objectId:Ce,version:ue(_(ge)),digest:ue(_(k())),initialSharedVersion:ue(_(ge))})}),Hi=At({Object:Mc,Pure:w({bytes:It})}),Gi=At({None:E(!0),Epoch:ge}),go=w({version:E(2),sender:ht(zt),expiration:ht(Gi),gasData:Cf,inputs:A(vf),commands:A(xf)});var Et={MoveCall(t){let[e,o="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:o,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(o=>z(G,o)),address:z(G,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:z(G,t),amounts:e.map(o=>z(G,o))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:z(G,t),sources:e.map(o=>z(G,o))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(o=>typeof o=="string"?o:Q(new Uint8Array(o))),dependencies:e.map(o=>ve(o))}}},Upgrade({modules:t,dependencies:e,package:o,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:t.map(r=>typeof r=="string"?r:Q(new Uint8Array(r))),dependencies:e.map(r=>ve(r)),package:o,ticket:z(G,n)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(o=>z(G,o))}}},Intent({name:t,inputs:e={},data:o={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Array.isArray(r)?r.map(i=>z(G,i)):z(G,r)])),data:o}}}};s();a();s();a();var qi=w({digest:k(),objectId:k(),version:le([F(q(),W()),k(),Sr()])}),If=At({ImmOrOwned:qi,Shared:w({objectId:Ce,initialSharedVersion:ge,mutable:Jt()}),Receiving:qi}),Dc=At({Object:If,Pure:A(F(q(),W()))}),Nc=le([w({kind:E("Input"),index:F(q(),W()),value:Je(),type:ue(E("object"))}),w({kind:E("Input"),index:F(q(),W()),value:Je(),type:E("pure")})]),Af=le([w({Epoch:F(q(),W())}),w({None:_(E(!0))})]),Rc=F(le([q(),k(),Sr()]),Yt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),Wi=le([w({bool:_(E(!0))}),w({u8:_(E(!0))}),w({u64:_(E(!0))}),w({u128:_(E(!0))}),w({address:_(E(!0))}),w({signer:_(E(!0))}),w({vector:Zt(()=>Wi)}),w({struct:Zt(()=>Ef)}),w({u16:_(E(!0))}),w({u32:_(E(!0))}),w({u256:_(E(!0))})]),Ef=w({address:k(),module:k(),name:k(),typeParams:A(Wi)}),Pf=w({budget:ue(Rc),price:ue(Rc),payment:ue(A(qi)),owner:ue(k())}),kf=[Nc,w({kind:E("GasCoin")}),w({kind:E("Result"),index:F(q(),W())}),w({kind:E("NestedResult"),index:F(q(),W()),resultIndex:F(q(),W())})],at=le([...kf]),Uf=w({kind:E("MoveCall"),target:F(k(),Yt(t=>t.split("::").length===3)),typeArguments:A(k()),arguments:A(at)}),Of=w({kind:E("TransferObjects"),objects:A(at),address:at}),Bf=w({kind:E("SplitCoins"),coin:at,amounts:A(at)}),Mf=w({kind:E("MergeCoins"),destination:at,sources:A(at)}),Df=w({kind:E("MakeMoveVec"),type:le([w({Some:Wi}),w({None:_(E(!0))})]),objects:A(at)}),Rf=w({kind:E("Publish"),modules:A(A(F(q(),W()))),dependencies:A(k())}),Nf=w({kind:E("Upgrade"),modules:A(A(F(q(),W()))),dependencies:A(k()),packageId:k(),ticket:at}),Lf=[Uf,Of,Bf,Mf,Rf,Nf,Df],Vf=le([...Lf]),Rk=w({version:E(1),sender:ue(k()),expiration:ht(Af),gasConfig:Pf,inputs:A(Nc),transactions:A(Vf)});function Ki(t){let e=t.inputs.map((o,n)=>{if(o.Object)return{kind:"Input",index:n,value:{Object:o.Object.ImmOrOwnedObject?{ImmOrOwned:o.Object.ImmOrOwnedObject}:o.Object.Receiving?{Receiving:{digest:o.Object.Receiving.digest,version:o.Object.Receiving.version,objectId:o.Object.Receiving.objectId}}:{Shared:{mutable:o.Object.SharedObject.mutable,initialSharedVersion:o.Object.SharedObject.initialSharedVersion,objectId:o.Object.SharedObject.objectId}}},type:"object"};if(o.Pure)return{kind:"Input",index:n,value:{Pure:Array.from(be(o.Pure.bytes))},type:"pure"};if(o.UnresolvedPure)return{kind:"Input",type:"pure",index:n,value:o.UnresolvedPure.value};if(o.UnresolvedObject)return{kind:"Input",type:"object",index:n,value:o.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:t.expiration?.$kind==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(o=>{if(o.MakeMoveVec)return{kind:"MakeMoveVec",type:o.MakeMoveVec.type===null?{None:!0}:{Some:rt.parseFromStr(o.MakeMoveVec.type)},objects:o.MakeMoveVec.elements.map(n=>it(n,e))};if(o.MergeCoins)return{kind:"MergeCoins",destination:it(o.MergeCoins.destination,e),sources:o.MergeCoins.sources.map(n=>it(n,e))};if(o.MoveCall)return{kind:"MoveCall",target:`${o.MoveCall.package}::${o.MoveCall.module}::${o.MoveCall.function}`,typeArguments:o.MoveCall.typeArguments,arguments:o.MoveCall.arguments.map(n=>it(n,e))};if(o.Publish)return{kind:"Publish",modules:o.Publish.modules.map(n=>Array.from(be(n))),dependencies:o.Publish.dependencies};if(o.SplitCoins)return{kind:"SplitCoins",coin:it(o.SplitCoins.coin,e),amounts:o.SplitCoins.amounts.map(n=>it(n,e))};if(o.TransferObjects)return{kind:"TransferObjects",objects:o.TransferObjects.objects.map(n=>it(n,e)),address:it(o.TransferObjects.address,e)};if(o.Upgrade)return{kind:"Upgrade",modules:o.Upgrade.modules.map(n=>Array.from(be(n))),dependencies:o.Upgrade.dependencies,packageId:o.Upgrade.package,ticket:it(o.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(o)}`)})}}function it(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function Lc(t){return z(go,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:t.gasConfig.budget?.toString()??null,price:t.gasConfig.price?.toString()??null,payment:t.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:t.inputs.map(e=>{if(e.kind==="Input"){if(So(Dc,e.value)){let o=z(Dc,e.value);if(o.Object){if(o.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:o.Object.ImmOrOwned.objectId,version:String(o.Object.ImmOrOwned.version),digest:o.Object.ImmOrOwned.digest}}};if(o.Object.Shared)return{Object:{SharedObject:{mutable:o.Object.Shared.mutable??null,initialSharedVersion:o.Object.Shared.initialSharedVersion,objectId:o.Object.Shared.objectId}}};if(o.Object.Receiving)return{Object:{Receiving:{digest:o.Object.Receiving.digest,version:String(o.Object.Receiving.version),objectId:o.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:Q(new Uint8Array(o.Pure))}}}return e.type==="object"?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?rt.tagToString(e.type.Some):null,elements:e.objects.map(o=>st(o))}};case"MergeCoins":return{MergeCoins:{destination:st(e.destination),sources:e.sources.map(o=>st(o))}};case"MoveCall":{let[o,n,r]=e.target.split("::");return{MoveCall:{package:o,module:n,function:r,typeArguments:e.typeArguments,arguments:e.arguments.map(i=>st(i))}}}case"Publish":return{Publish:{modules:e.modules.map(o=>Q(Uint8Array.from(o))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:st(e.coin),amounts:e.amounts.map(o=>st(o))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(o=>st(o)),address:st(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(o=>Q(Uint8Array.from(o))),dependencies:e.dependencies,package:e.packageId,ticket:st(e.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(e)}`)})})}function st(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}s();a();function Vo(t){return le(Object.entries(t).map(([e,o])=>w({[e]:o})))}var We=Vo({GasCoin:E(!0),Input:F(q(),W()),Result:F(q(),W()),NestedResult:ln([F(q(),W()),F(q(),W())])}),_f=w({budget:_(ge),price:_(ge),owner:_(zt),payment:_(A(qe))}),jf=w({package:Ce,module:k(),function:k(),typeArguments:A(k()),arguments:A(We)}),Ff=w({name:k(),inputs:eo(k(),le([We,A(We)])),data:eo(k(),Je())}),$f=Vo({MoveCall:jf,TransferObjects:w({objects:A(We),address:We}),SplitCoins:w({coin:We,amounts:A(We)}),MergeCoins:w({destination:We,sources:A(We)}),Publish:w({modules:A(It),dependencies:A(Ce)}),MakeMoveVec:w({type:_(k()),elements:A(We)}),Upgrade:w({modules:A(It),dependencies:A(Ce),package:Ce,ticket:We}),$Intent:Ff}),zf=Vo({ImmOrOwnedObject:qe,SharedObject:w({objectId:Ce,initialSharedVersion:ge,mutable:Jt()}),Receiving:qe}),Hf=Vo({Object:zf,Pure:w({bytes:It}),UnresolvedPure:w({value:Je()}),UnresolvedObject:w({objectId:Ce,version:ue(_(ge)),digest:ue(_(k())),initialSharedVersion:ue(_(ge))})}),Gf=Vo({None:E(!0),Epoch:ge}),Vc=w({version:E(2),sender:ht(zt),expiration:ht(Gf),gasData:_f,inputs:A(Hf),commands:A($f)});s();a();var qf=50,Wf=1000n,Kf=5e10;async function jc(t,e,o){return await Zf(t,e),await Jf(t,e),e.onlyTransactionKind||(await Qf(t,e),await Xf(t,e),await Yf(t,e)),await eh(t),await o()}async function Qf(t,e){t.gasConfig.price||(t.gasConfig.price=String(await _o(e).getReferenceGasPrice()))}async function Xf(t,e){if(t.gasConfig.budget)return;let o=await _o(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(Kf),payment:[]}}})});if(o.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${o.effects.status.error}`,{cause:o});let n=Wf*BigInt(t.gasConfig.price||1n),r=BigInt(o.effects.gasUsed.computationCost)+n,i=r+BigInt(o.effects.gasUsed.storageCost)-BigInt(o.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>r?i:r)}async function Yf(t,e){if(!t.gasConfig.payment){let n=(await _o(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:Vi})).data.filter(r=>!t.inputs.find(l=>l.Object?.ImmOrOwnedObject?r.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1)).map(r=>({objectId:r.coinObjectId,digest:r.digest,version:r.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=n.map(r=>z(qe,r))}}async function Jf(t,e){let o=t.inputs.filter(m=>m.UnresolvedObject&&!(m.UnresolvedObject.version||m.UnresolvedObject?.initialSharedVersion)),n=[...new Set(o.map(m=>ve(m.UnresolvedObject.objectId)))],r=n.length?rh(n,qf):[],i=(await Promise.all(r.map(m=>_o(e).multiGetObjects({ids:m,options:{showOwner:!0}})))).flat(),l=new Map(n.map((m,h)=>[m,i[h]])),c=Array.from(l).filter(([m,h])=>h.error).map(([m,h])=>JSON.stringify(h.error));if(c.length)throw new Error(`The following input objects are invalid: ${c.join(", ")}`);let d=i.map(m=>{if(m.error||!m.data)throw new Error(`Failed to fetch object: ${m.error}`);let h=m.data.owner,g=h&&typeof h=="object"&&"Shared"in h?h.Shared.initial_shared_version:null;return{objectId:m.data.objectId,digest:m.data.digest,version:m.data.version,initialSharedVersion:g}}),p=new Map(n.map((m,h)=>[m,d[h]]));for(let[m,h]of t.inputs.entries()){if(!h.UnresolvedObject)continue;let g,y=M(h.UnresolvedObject.objectId),C=p.get(y);h.UnresolvedObject.initialSharedVersion??C?.initialSharedVersion?g=Ge.SharedObjectRef({objectId:y,initialSharedVersion:h.UnresolvedObject.initialSharedVersion||C?.initialSharedVersion,mutable:th(t,m)}):oh(t,m)&&(g=Ge.ReceivingRef({objectId:y,digest:h.UnresolvedObject.digest??C?.digest,version:h.UnresolvedObject.version??C?.version})),t.inputs[t.inputs.indexOf(h)]=g??Ge.ObjectRef({objectId:y,digest:h.UnresolvedObject.digest??C?.digest,version:h.UnresolvedObject.version??C?.version})}}async function Zf(t,e){let{inputs:o,commands:n}=t,r=[],i=new Set;n.forEach(c=>{if(c.MoveCall){if(c.MoveCall._argumentTypes)return;if(c.MoveCall.arguments.map(m=>m.$kind==="Input"?t.inputs[m.Input]:null).some(m=>m?.UnresolvedPure||m?.UnresolvedObject)){let m=`${c.MoveCall.package}::${c.MoveCall.module}::${c.MoveCall.function}`;i.add(m),r.push(c.MoveCall)}}switch(c.$kind){case"SplitCoins":c.SplitCoins.amounts.forEach(d=>{_c(d,R.U64,t)});break;case"TransferObjects":_c(c.TransferObjects.address,R.Address,t);break}});let l=new Map;if(i.size>0){let c=_o(e);await Promise.all([...i].map(async d=>{let[p,m,h]=d.split("::"),g=await c.getNormalizedMoveFunction({package:p,module:m,function:h});l.set(d,g.parameters.map(y=>Bc(y)))}))}r.length&&await Promise.all(r.map(async c=>{let d=l.get(`${c.package}::${c.module}::${c.function}`);if(!d)return;let m=d.length>0&&Oc(d.at(-1))?d.slice(0,d.length-1):d;c._argumentTypes=m})),n.forEach(c=>{if(!c.MoveCall)return;let d=c.MoveCall,p=`${d.package}::${d.module}::${d.function}`,m=d._argumentTypes;if(m){if(m.length!==c.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${p}`);m.forEach((h,g)=>{let y=d.arguments[g];if(y.$kind!=="Input")return;let C=o[y.Input];if(!C.UnresolvedPure&&!C.UnresolvedObject)return;let S=C.UnresolvedPure?.value??C.UnresolvedObject?.objectId,v=sr(h.body);if(v){y.type="pure",o[o.indexOf(C)]=Ge.Pure(v.serialize(S));return}if(typeof S!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(S,null,2)}`);y.type="object";let O=C.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:S}}:C;o[y.Input]=O})}})}function eh(t){t.inputs.forEach((e,o)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${o} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function _c(t,e,o){if(t.$kind!=="Input")return;let n=o.inputs[t.Input];n.$kind==="UnresolvedPure"&&(o.inputs[t.Input]=Ge.Pure(e.serialize(n.UnresolvedPure.value)))}function th(t,e){let o=!1;return t.getInputUses(e,(n,r)=>{if(r.MoveCall&&r.MoveCall._argumentTypes){let i=r.MoveCall.arguments.indexOf(n);o=r.MoveCall._argumentTypes[i].ref!=="&"||o}(r.$kind==="MakeMoveVec"||r.$kind==="MergeCoins"||r.$kind==="SplitCoins")&&(o=!0)}),o}function oh(t,e){let o=!1;return t.getInputUses(e,(n,r)=>{if(r.MoveCall&&r.MoveCall._argumentTypes){let i=r.MoveCall.arguments.indexOf(n);o=nh(r.MoveCall._argumentTypes[i])||o}}),o}function nh(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function _o(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function rh(t,e){return Array.from({length:Math.ceil(t.length/e)},(o,n)=>t.slice(n*e,n*e+e))}s();a();function Fc(t){function e(o){return t(o)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:o,value:n})=>r=>r.moveCall({typeArguments:[o],target:`0x1::option::${n===null?"none":"some"}`,arguments:n===null?[]:[r.object(n)]}),e}s();a();function $c(t){function e(o,n){if(typeof o=="string")return t(bo(o).serialize(n));if(o instanceof Uint8Array||mo(o))return t(o);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=o=>t(R.U8.serialize(o)),e.u16=o=>t(R.U16.serialize(o)),e.u32=o=>t(R.U32.serialize(o)),e.u64=o=>t(R.U64.serialize(o)),e.u128=o=>t(R.U128.serialize(o)),e.u256=o=>t(R.U256.serialize(o)),e.bool=o=>t(R.Bool.serialize(o)),e.string=o=>t(R.String.serialize(o)),e.address=o=>t(R.Address.serialize(o)),e.id=e.address,e.vector=(o,n)=>t(R.vector(bo(o)).serialize(n)),e.option=(o,n)=>t(R.option(bo(o)).serialize(n)),e}s();a();s();a();function zc(t,e){let o=Array.from(`${t}::`).map(r=>r.charCodeAt(0)),n=new Uint8Array(o.length+e.length);return n.set(o),n.set(e,o.length),Uc(n,{dkLen:32})}function Hc(t){return M(t).replace("0x","")}var Pt=class t{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let n=R.TransactionKind.parse(e).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(e){let n=R.TransactionData.parse(e)?.V1,r=n.kind.ProgrammableTransaction;if(!n||!r)throw new Error("Unable to deserialize from bytes.");return t.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:r.inputs,commands:r.commands})}static restore(e){return e.version===2?new t(z(go,e)):new t(z(go,Lc(e)))}static getDigestFromBytes(e){let o=zc("TransactionData",e);return nt(o)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:o,onlyTransactionKind:n}={}){let r=this.inputs,i=this.commands,l={ProgrammableTransaction:{inputs:r,commands:i}};if(n)return R.TransactionKind.serialize(l,{maxSize:e}).toBytes();let c=o?.expiration??this.expiration,d=o?.sender??this.sender,p={...this.gasData,...o?.gasConfig,...o?.gasData};if(!d)throw new Error("Missing transaction sender");if(!p.budget)throw new Error("Missing gas budget");if(!p.payment)throw new Error("Missing gas payment");if(!p.price)throw new Error("Missing gas price");let m={sender:Hc(d),expiration:c||{None:!0},gasData:{payment:p.payment,owner:Hc(this.gasData.owner??d),price:BigInt(p.price),budget:BigInt(p.budget)},kind:{ProgrammableTransaction:{inputs:r,commands:i}}};return R.TransactionData.serialize({V1:m},{maxSize:e}).toBytes()}addInput(e,o){let n=this.inputs.length;return this.inputs.push(o),{Input:n,type:e,$kind:"Input"}}getInputUses(e,o){this.mapArguments((n,r)=>(n.$kind==="Input"&&n.Input===e&&o(n,r),n))}mapArguments(e){for(let o of this.commands)switch(o.$kind){case"MoveCall":o.MoveCall.arguments=o.MoveCall.arguments.map(r=>e(r,o));break;case"TransferObjects":o.TransferObjects.objects=o.TransferObjects.objects.map(r=>e(r,o)),o.TransferObjects.address=e(o.TransferObjects.address,o);break;case"SplitCoins":o.SplitCoins.coin=e(o.SplitCoins.coin,o),o.SplitCoins.amounts=o.SplitCoins.amounts.map(r=>e(r,o));break;case"MergeCoins":o.MergeCoins.destination=e(o.MergeCoins.destination,o),o.MergeCoins.sources=o.MergeCoins.sources.map(r=>e(r,o));break;case"MakeMoveVec":o.MakeMoveVec.elements=o.MakeMoveVec.elements.map(r=>e(r,o));break;case"Upgrade":o.Upgrade.ticket=e(o.Upgrade.ticket,o);break;case"$Intent":let n=o.$Intent.inputs;o.$Intent.inputs={};for(let[r,i]of Object.entries(n))o.$Intent.inputs[r]=Array.isArray(i)?i.map(l=>e(l,o)):e(i,o);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${o.$kind}`)}}replaceCommand(e,o){if(!Array.isArray(o)){this.commands[e]=o;return}let n=o.length-1;this.commands.splice(e,1,...o),n!==0&&this.mapArguments(r=>{switch(r.$kind){case"Result":r.Result>e&&(r.Result+=n);break;case"NestedResult":r.NestedResult[0]>e&&(r.NestedResult[0]+=n);break}return r})}getDigest(){let e=this.build({onlyTransactionKind:!1});return t.getDigestFromBytes(e)}snapshot(){return z(go,this)}};s();a();function Qi(t){if(typeof t=="string")return M(t);if(t.Object)return t.Object.ImmOrOwnedObject?M(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?M(t.Object.Receiving.objectId):M(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return M(t.UnresolvedObject.objectId)}var Wc=t=>{throw TypeError(t)},Zi=(t,e,o)=>e.has(t)||Wc("Cannot "+o),N=(t,e,o)=>(Zi(t,e,"read from private field"),o?o.call(t):e.get(t)),jo=(t,e,o)=>e.has(t)?Wc("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,o),Ht=(t,e,o,n)=>(Zi(t,e,"write to private field"),n?n.call(t,o):e.set(t,o),o),lt=(t,e,o)=>(Zi(t,e,"access private method"),o),$o,zo,Gt,L,Ke,ar,es,Yi,ts;function Gc(t,e=1/0){let o={$kind:"Result",Result:t},n=[],r=i=>n[i]??(n[i]={$kind:"NestedResult",NestedResult:[t,i]});return new Proxy(o,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,l){if(l in i)return Reflect.get(i,l);if(l===Symbol.iterator)return function*(){let d=0;for(;d<e;)yield r(d),d++};if(typeof l=="symbol")return;let c=parseInt(l,10);if(!(Number.isNaN(c)||c<0))return r(c)}})}var Kc=Symbol.for("@mysten/transaction");function lr(t){return!!t&&typeof t=="object"&&t[Kc]===!0}var qc={buildPlugins:new Map,serializationPlugins:new Map},Xi=Symbol.for("@mysten/transaction/registry");function Fo(){try{let t=globalThis;return t[Xi]||(t[Xi]=qc),t[Xi]}catch{return qc}}var ih=class Ji{constructor(){jo(this,Ke),jo(this,$o),jo(this,zo),jo(this,Gt,new Map),jo(this,L),this.object=Fc(o=>{if(typeof o=="function")return this.object(o(this));if(typeof o=="object"&&So(G,o))return o;let n=Qi(o),r=N(this,L).inputs.find(i=>n===Qi(i));return r?.Object?.SharedObject&&typeof o=="object"&&o.Object?.SharedObject&&(r.Object.SharedObject.mutable=r.Object.SharedObject.mutable||o.Object.SharedObject.mutable),r?{$kind:"Input",Input:N(this,L).inputs.indexOf(r),type:"object"}:N(this,L).addInput("object",typeof o=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:M(o)}}:o)});let e=Fo();Ht(this,L,new Pt),Ht(this,zo,[...e.buildPlugins.values()]),Ht(this,$o,[...e.serializationPlugins.values()])}static fromKind(e){let o=new Ji;return Ht(o,L,Pt.fromKindBytes(typeof e=="string"?be(e):e)),o}static from(e){let o=new Ji;return lr(e)?Ht(o,L,new Pt(e.getData())):typeof e!="string"||!e.startsWith("{")?Ht(o,L,Pt.fromBytes(typeof e=="string"?be(e):e)):Ht(o,L,Pt.restore(JSON.parse(e))),o}static registerGlobalSerializationPlugin(e,o){Fo().serializationPlugins.set(e,o??e)}static unregisterGlobalSerializationPlugin(e){Fo().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,o){Fo().buildPlugins.set(e,o??e)}static unregisterGlobalBuildPlugin(e){Fo().buildPlugins.delete(e)}addSerializationPlugin(e){N(this,$o).push(e)}addBuildPlugin(e){N(this,zo).push(e)}addIntentResolver(e,o){if(N(this,Gt).has(e)&&N(this,Gt).get(e)!==o)throw new Error(`Intent resolver for ${e} already exists`);N(this,Gt).set(e,o)}setSender(e){N(this,L).sender=e}setSenderIfNotSet(e){N(this,L).sender||(N(this,L).sender=e)}setExpiration(e){N(this,L).expiration=e?z(Gi,e):null}setGasPrice(e){N(this,L).gasConfig.price=String(e)}setGasBudget(e){N(this,L).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){N(this,L).gasData.budget==null&&(N(this,L).gasConfig.budget=String(e))}setGasOwner(e){N(this,L).gasConfig.owner=e}setGasPayment(e){N(this,L).gasConfig.payment=e.map(o=>z(qe,o))}get blockData(){return Ki(N(this,L).snapshot())}getData(){return N(this,L).snapshot()}get[Kc](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:$c(e=>mo(e)?N(this,L).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):N(this,L).addInput("pure",So(Hi,e)?z(Hi,e):e instanceof Uint8Array?Ge.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(Ge.ObjectRef(...e))}receivingRef(...e){return this.object(Ge.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Ge.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);let o=N(this,L).commands.push(e);return Gc(o-1)}splitCoins(e,o){let n=Et.SplitCoins(typeof e=="string"?this.object(e):lt(this,Ke,es).call(this,e),o.map(i=>typeof i=="number"||typeof i=="bigint"||typeof i=="string"?this.pure.u64(i):lt(this,Ke,ar).call(this,i))),r=N(this,L).commands.push(n);return Gc(r-1,o.length)}mergeCoins(e,o){return this.add(Et.MergeCoins(this.object(e),o.map(n=>this.object(n))))}publish({modules:e,dependencies:o}){return this.add(Et.Publish({modules:e,dependencies:o}))}upgrade({modules:e,dependencies:o,package:n,ticket:r}){return this.add(Et.Upgrade({modules:e,dependencies:o,package:n,ticket:this.object(r)}))}moveCall({arguments:e,...o}){return this.add(Et.MoveCall({...o,arguments:e?.map(n=>lt(this,Ke,ar).call(this,n))}))}transferObjects(e,o){return this.add(Et.TransferObjects(e.map(n=>this.object(n)),typeof o=="string"?this.pure.address(o):lt(this,Ke,ar).call(this,o)))}makeMoveVec({type:e,elements:o}){return this.add(Et.MakeMoveVec({type:e,elements:o.map(n=>this.object(n))}))}serialize(){return JSON.stringify(Ki(N(this,L).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(z(Vc,N(this,L).snapshot()),(o,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){let{signer:o,...n}=e,r=await this.build(n);return o.signTransaction(r)}async build(e={}){return await this.prepareForSerialization(e),await lt(this,Ke,Yi).call(this,e),N(this,L).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await lt(this,Ke,Yi).call(this,e),N(this,L).getDigest()}async prepareForSerialization(e){let o=new Set;for(let r of N(this,L).commands)r.$Intent&&o.add(r.$Intent.name);let n=[...N(this,$o)];for(let r of o)if(!e.supportedIntents?.includes(r)){if(!N(this,Gt).has(r))throw new Error(`Missing intent resolver for ${r}`);n.push(N(this,Gt).get(r))}await lt(this,Ke,ts).call(this,n,e)}};$o=new WeakMap;zo=new WeakMap;Gt=new WeakMap;L=new WeakMap;Ke=new WeakSet;ar=function(t){return mo(t)?this.pure(t):lt(this,Ke,es).call(this,t)};es=function(t){return typeof t=="function"?z(G,t(this)):z(G,t)};Yi=async function(t){if(!t.onlyTransactionKind&&!N(this,L).sender)throw new Error("Missing transaction sender");await lt(this,Ke,ts).call(this,[...N(this,zo),jc],t)};ts=async function(t,e){let o=n=>{if(n>=t.length)return()=>{};let r=t[n];return async()=>{let i=o(n+1),l=!1,c=!1;if(await r(N(this,L),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);l=!0,await i(),c=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!c)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await o(0)()};var os=ih;var sh=Symbol.for("@mysten/SuiClient");var Ho=class{get[sh](){return!0}constructor(e){this.transport=e.transport??new zn({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!Pe(M(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!Pe(M(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!Pe(M(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!Pe(M(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,o){return await this.transport.request({method:e,params:o})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!Pe(M(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!fo(ve(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!fo(ve(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Zn(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Zn(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:o,options:n,requestType:r}){let i=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:Q(e),Array.isArray(o)?o:[o],n]});if(r==="WaitForLocalExecution")try{await this.waitForTransaction({digest:i.digest})}catch{}return i}async signAndExecuteTransaction({transaction:e,signer:o,...n}){let r;e instanceof Uint8Array?r=e:(e.setSenderIfNotSet(o.toSuiAddress()),r=await e.build({client:this}));let{signature:i,bytes:l}=await o.signTransaction(r);return this.executeTransactionBlock({transactionBlock:l,signature:i,...n})}async getTotalTransactionBlocks(){let e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){let e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!Pe(M(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(o=>{if(!o||!fo(ve(o)))throw new Error(`Invalid Sui Stake id ${o}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){let o;if(lr(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),o=Q(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")o=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)o=Q(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,o,e.gasPrice?.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:Q(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!fo(ve(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){let e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){let e=await this.getCheckpoint({id:"0"}),o=Fe(e.digest);return Ye(o.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...o}){let{nextCursor:n,hasNextPage:r,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[o.address,o.cursor,o.limit]});return{hasNextPage:r,nextCursor:n,data:i.map(l=>vc(l,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version]})}async waitForTransaction({signal:e,timeout:o=60*1e3,pollInterval:n=2*1e3,...r}){let i=AbortSignal.timeout(o),l=new Promise((c,d)=>{i.addEventListener("abort",()=>d(i.reason))});for(l.catch(()=>{});!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(r)}catch{await Promise.race([new Promise(d=>setTimeout(d,n)),l])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};var Qc=async({chain:t,owner:e,chainData:o},{recipient:n})=>{let r=t.id,{objectId:i}=o,l=D.getRpcProxyUrl(r);if(!i)throw new Error("Unable to determine object id for collectible");if(!e)throw new Error("Unable to determine owner for collectible");if(!l)throw new Error("Failed to get Sui RPC url");let c=new Ho({url:l}),d=new os;d.setSender(e),d.transferObjects([i],n);let p=await d.build({client:c});return{networkID:r,transaction:p}};async function Xc(t,e,o){let{chain:n}=t,r=n.id;return D.isSolanaNetworkID(r)?Zl(t,e):D.isEVMNetworkID(r)?Ql(t,e):D.isSuiNetworkID(r)?Qc(t,e):D.isBitcoinNetworkID(r)?Hl(t,e,o):hs(r)}var ah="collectible-transfer-tx",lh=re({seconds:30});function ch(t){return t&&!t.isNaN()}function uh(t){let{collectible:e,sendFormValues:o}=t??{},{chain:n,owner:r}=e??{},{id:i}=n??{},{recipient:l,amountAsset:c}=o??{},d=ga(l,i)??"",p=c?.isNaN()?void 0:c,m=ch(p),{data:h}=Zo({address:r,networkID:i}),{data:g}=ba(h),{data:y}=da({networkID:i,enableFallback:!0}),C=dh(i,y,g,h),S=C?.sendContextRequired?C.sendContext:void 0;return ne({staleTime:lh,enabled:m&&!!e&&!!t&&!!C,queryKey:B.transferTransaction({collectible:e,sendFormValues:o,sendContext:S}),async queryFn(){try{if(!e||!o||!C)throw new Error("Missing required data to construct fungible transfer transaction");return await Xc(e,{...o,recipient:d},S)}catch(v){if(ft(v)){let O=v.response?.status;yt(v,O,ah)}throw v}}})}function dh(t,e,o,n){if(t)return D.isBitcoinNetworkID(t)?!e||!o||!n?void 0:{sendContextRequired:!0,sendContext:{transactionSpeedsToUnitCost:e,utxoState:o,chainAddress:n}}:{sendContextRequired:!1}}s();a();var ns=x(P());s();a();var Co=t=>{let e=oe();return ne({enabled:t.length!==0,queryKey:B.pinnedCollections(t),gcTime:Be.Long,staleTime:1/0,refetchInterval:!1,refetchOnMount:!0,async queryFn(){try{return(await Pn(e)??{})[t]||[]}catch(o){return o instanceof Error&&X.captureError(o,"collectibles"),[]}}})};s();a();var Jc=x(P());s();a();var Go=t=>{let e=oe();return ne({enabled:t.length!==0,queryKey:B.hiddenCollections(t),gcTime:Be.Long,staleTime:1/0,async queryFn(){try{let o=await et(e,t);return Array.from(o.values()).filter(n=>bn(n,{spamStatus:"NOT_VERIFIED"})).map(({id:n})=>n)}catch(o){return o instanceof Error&&X.captureError(o,"collectibles"),[]}}})};s();a();var Yc=x(P());s();a();s();a();var Zc=x(P());var ph=t=>{let e=se();return(0,Zc.useCallback)(()=>e.invalidateQueries({queryKey:B.collections(t)}),[e,t])};s();a();var mh=2e3,cr=class extends Ue{constructor(e){super(e),this.name="UsePinCollectionError"}};function ur(){let t=oe(),e=se();return Re({async mutationFn({collectionId:o,accountId:n,pinned:r}){let i=await Pn(t)??{},l=i[n]??[];if(r){if(Object.values(i).flat().length+1>mh)throw new cr("Pinned limit reached");let d=[...new Set([...l,o])],p={...i,[n]:d};await _r(t,p)}else{let c=l.indexOf(o);if(c===-1)throw new cr("Collection not previously pinned");let d=[...l];d.splice(c,1);let p={...i,[n]:d};await _r(t,p)}},async onSuccess(o,n){await e.invalidateQueries({queryKey:B.pinnedCollections(n.accountId)})}})}s();a();var eu=x(P());var fh=t=>{let e=se();return(0,eu.useCallback)(()=>e.refetchQueries({queryKey:B.collections(t)}),[e,t])};s();a();s();a();var hh=new Error("Failed to report event for collectible");async function tu(t){try{let e=await he.api().post("/collectibles/v1/events",{events:t});if(!fs(e))throw new Error}catch{throw hh}}function ou(){return Re({async mutationFn({event:t}){try{await tu([t])}catch{}}})}s();a();function bh(){let{data:t}=Is(),e=oe(),o=se(),n=ha(),r=Xt();return Re({mutationFn:async({multichainTransaction:l,pendingTransactionInput:c,senderAddress:d,optimisticUpdate:p,gasEstimation:m})=>{if(!t)throw new Error("No account identifier found");let{networkID:h}=l,g=await to.get(h).onBeforeSend({multichainTransaction:l,gasEstimation:m}),y=await ta({accountIdentifier:t,accountSigner:r,multichainTransaction:g,networkID:h,pendingTransactionInput:c,senderAddress:d,storage:e,utxoManager:n});return p&&ro(o,p),ea(h,y)},onError(l){l instanceof Error&&X.captureError(l,"collectibles")}})}s();a();var dr=t=>{let e=oe();return ne({enabled:t.length!==0,queryKey:B.unhiddenCollections(t),gcTime:Be.Long,staleTime:1/0,async queryFn(){try{let o=await et(e,t);return Array.from(o.values()).filter(n=>la(n,{spamStatus:"NOT_VERIFIED"})).map(({id:n})=>n)}catch(o){return o instanceof Error&&X.captureError(o,"collectibles"),[]}}})};s();a();var yh=2e3,rs=class extends Error{constructor(e){super(e),this.name="UseUnhideCollectionError"}};function pr(){let t=oe(),e=se(),o=Z();return Re({async mutationFn(n){let{collectionId:r,accountId:i}=n,l=await Tr(t);if(!(await et(t,i)).has(r)&&l>=yh)throw new rs("Too many ids unhidden");await xo(t,o,{accountId:i,mutations:[{id:r,visibility:"visible"}]})},async onSuccess(n,r){await e.invalidateQueries({queryKey:B.unhiddenCollections(r.accountId)}),await e.invalidateQueries({queryKey:B.hiddenCollections(r.accountId)})}})}s();a();var nu=x(P());var gh=({id:t,addresses:e})=>{let{data:o,isSuccess:n}=gt({addresses:e});return(0,nu.useMemo)(()=>{let i={isSuccess:n,data:void 0};for(let l of o??[])for(let c of l.items)if(c.id===t)return{...i,data:c};return i},[t,o,n])};s();a();var qt=x(P());s();a();var is=x(P());var ru=({toast:t,accountId:e})=>{let{t:o}=Y(),n=Z(),r=(0,is.useCallback)(({collectible:l,previousVisibility:c,updatedVisibility:d})=>{d!==null&&n.capture("collectiblesReportAsNotSpam",{data:Ct(l)}),t.success(c==="visible"?o("collectiblesNotSpamSuccess"):o("collectiblesNotSpamAndUnhiddenSuccess"))},[o,t,n]),i=(0,is.useCallback)((l,c)=>{t.error(o("collectiblesNotSpamFail"))},[o,t]);return al({accountId:e,onSuccess:r,onError:i})};s();a();var ss=x(P());var iu=({toast:t,accountId:e})=>{let{t:o}=Y(),n=Z(),r=(0,ss.useCallback)(({collectible:l,previousVisibility:c,updatedVisibility:d})=>{d!==null&&n.capture("collectiblesReportAsSpam",{data:Ct(l)}),t.success(c==="hidden"?o("collectiblesSpamSuccess"):o("collectiblesSpamAndHiddenSuccess"))},[o,t,n]),i=(0,ss.useCallback)((l,c)=>{t.error(o("collectiblesSpamFail"))},[o,t]);return sl({accountId:e,onSuccess:r,onError:i})};function Ch({accountId:t,collectible:e,toast:o}){let n=iu({collectible:e,accountId:t,toast:o}),r=(0,qt.useCallback)(()=>{if(e)return n(e)},[n,e]),i=ru({collectible:e,accountId:t,toast:o}),l=(0,qt.useCallback)(()=>{if(e)return i(e)},[i,e]),{data:c}=xe(t??""),d=(0,qt.useMemo)(()=>c?.get(e?.collection.id??e?.id??""),[c,e]),p=(0,qt.useMemo)(()=>e?aa(d,{spamStatus:e.collection.spamStatus}):"NOT_VERIFIED",[e,d]),m=vo(p);return(0,qt.useMemo)(()=>({isSpam:m,spamStatus:p,onReportSpam:m?void 0:r,onReportNotSpam:m?l:void 0}),[p,m,r,l])}s();a();var su=x(tn()),au=x(P());s();a();var mr=(t,e)=>{let o=new kt(t);if(o.isZero())return"0";let n=rn(-e);return o.abs().lt(n)?o.isPositive()?`<${n.toFixed()}`:`-<${n.toFixed()}`:parseFloat(o.toString()).toLocaleString("en-US",{maximumFractionDigits:e})};var Sh=t=>{let{t:e}=Y();return(0,au.useMemo)(()=>{let n=[];if(!t)return n;let r=t?.chain.id,i=bt.get(r).collectibleDetailPrecision;t.collection.name&&n.push({topLeft:e("collectibleScreenCollectionLabel"),topRight:t.collection.name});let l,c;if(t.collection.floorPrice){let{price:m,token:h}=t.collection.floorPrice;if(h&&h.decimals&&h.symbol){let{decimals:g,symbol:y}=h,C=Mt(m,g);n.push({topLeft:e("collectiblesFloorPrice"),topRight:`${mr(C,i)} ${y}`}),l=C,c=y}}let d,p;if(t.lastSalePrice){let{price:m,token:h}=t.lastSalePrice;if(h&&h.decimals&&(h.symbol||h.name)){let{decimals:g,symbol:y,name:C}=h,S=Mt(m,g);n.push({topLeft:e("collectiblesLastSalePrice"),topRight:`${mr(S,i)} ${y??C}`}),d=S,p=y}}if(l&&d&&c===p){let m=l-d;n.push({topLeft:e("collectiblesTotalReturn"),topRight:{text:`${mr(m,i)} ${p}`,color:m>0?"spotPositive":m===0?void 0:"spotNegative"}})}return t.collection.ownerCount&&n.push({topLeft:e("collectiblesUniqueHolders"),topRight:(0,su.default)(t.collection.ownerCount).format("0,0")}),t.chain.name&&n.push({topLeft:e("sendFungibleSummaryNetwork"),topRight:D.getNetworkName(t.chain.id)}),Ko()&&n.push({topLeft:"Standard",topRight:wh(t)}),yn(t)&&n.push({topLeft:e("collectiblesNonTransferable"),topRight:e("collectiblesNonTransferableYes")}),n},[t,e])};function wh(t){let e=t.chainData;if(K(e))return e.standard;if(Te(e))return e.standard;if(Ne(e))return"Ordinals"}s();a();var lu=x(P());var Th=({id:t,addresses:e})=>{let{data:o}=gt({addresses:e});return(0,lu.useMemo)(()=>(o??[]).find(n=>n.id===t),[t,o])};s();a();var du=x(P());s();a();var xh=x(P());s();a();var vh=x(P());s();a();var cu=x(P()),fr=(t,e,o,n)=>(0,cu.useMemo)(()=>e.includes(o)?!1:t.includes(o)?!0:!!n,[t,e,o,n]);s();a();var uu=x(P()),hr=(t,e)=>(0,uu.useMemo)(()=>e?t.includes(e):!1,[e,t]);s();a();var qo=x(P());s();a();var pu=x(P()),as=({accountId:t,collectionId:e,isPinned:o,pinMessages:n,pinCollection:r,toast:i,sendAnalyticEvent:l,unhideCollection:c,isHidden:d})=>(0,pu.useCallback)(()=>{(async()=>{if(!e||!t){i.error(o?n.unpinFail:n.pinFail);return}try{await r({collectionId:e,accountId:t,pinned:!o}),d&&!o&&await c({collectionId:e,accountId:t}),i.success(o?n.unpinSuccess:n.pinSuccess),l&&l(o?"collectionUnpinned":"collectionPinned")}catch{i.error(o?n.unpinFail:n.pinFail)}})()},[e,t,o,n,r,i,l,c,d]);var Ph=({collectionId:t,isSpam:e,accountId:o,networkId:n,toast:r})=>{let{t:i}=Y(),l=Z(),{mutateAsync:c}=pr(),{data:d=[]}=Go(o||""),{data:p=[]}=dr(o||""),m=fr(d,p,t??"",!!e),{mutateAsync:h}=ur(),{data:g=[]}=Co(o||""),y=hr(g,t??""),C=(0,qo.useMemo)(()=>({pinSuccess:i("collectionPinSuccess"),pinFail:i("collectionPinFail"),unpinSuccess:i("collectionUnpinSuccess"),unpinFail:i("collectionUnpinFail")}),[i]),S=(0,qo.useCallback)(O=>{n&&l.capture(O,{data:{networkId:n,chainId:D.getChainID(n)}})},[l,n]),v=as({accountId:o,collectionId:t,isPinned:y,pinMessages:C,pinCollection:h,toast:r,sendAnalyticEvent:S,unhideCollection:c,isHidden:m});return(0,qo.useMemo)(()=>({isPinned:y,onTogglePin:v}),[y,v])};s();a();var Wo=x(P());var kh=({networkID:t,isTxError:e,isTxConfirmed:o,isTxSubmitted:n})=>{let r=bt.get(t).sendSuccessCondition,i=(0,Wo.useMemo)(()=>e?"ERROR":r==="SUBMISSION"&&n||r==="CONFIRMATION"&&o?"SUCCESS":"LOADING",[o,e,n,r]),l=r==="CONFIRMATION"?"sendStatusConfirmedSuccessTitle":"sendStatusSubmittedSuccessTitle",c=(0,Wo.useMemo)(()=>{switch(i){case"LOADING":return Ee.t("sendStatusLoadingTitle");case"ERROR":return Ee.t("sendStatusErrorTitle");case"SUCCESS":return Ee.t(l)}},[i,l]),{isError:d,isSuccess:p}=(0,Wo.useMemo)(()=>({isError:i==="ERROR",isSuccess:i==="SUCCESS"}),[i]),{transactionSpeed:m="standard"}=oi(g=>g.sendFormValues),h=(0,Wo.useMemo)(()=>{let g=to.get(t).transactionSpeedDescription(m);return g?Ee.t(g):""},[t,m]);return{title:c,isError:d,isSuccess:p,sendSuccessCondition:r,estimatedTime:h}};s();a();var bu=x(P());s();a();var mu={listCollectible:null,listCollectiblePrice:null,editListCollectiblePrice:null,unlistCollectible:null,transactionURL:null},ls=Qe(t=>({...mu,reset:()=>t({...mu}),setListCollectible:e=>t({listCollectible:e}),setListPrice:e=>t({listCollectiblePrice:e}),setEditListPrice:e=>t({editListCollectiblePrice:e}),setUnlistCollectible:e=>t({unlistCollectible:e}),setTransactionURL:e=>t({transactionURL:e})}));s();a();var yu=x(P());s();a();var gu=x(P());s();a();var Cu=x(P());var Oh=!1,Bh="small",Mh="image",Dh=t=>(0,Cu.useMemo)(()=>Su(t),[t]),Su=(t,e=Bh)=>{if(!t)return;let{media:o,collection:n}=t,r=Oh,i=Mh;return o?Ln({collectibleMedia:o,isImageAnimationEnabled:r,previewSize:e,mediaTypeOverride:i}):n.imageUrl};s();a();var wu=x(P()),Tu=t=>{let{items:e}=t;if(e.length!==0)return e.find(({media:o})=>o?.type==="image")},Rh=t=>(0,wu.useMemo)(()=>{if(t)return Tu(t)??t.items[0]},[t]);s();a();var xu=x(P());var Nh=t=>(0,xu.useMemo)(()=>{if(!(!t||t.items.length===0))return vu(t)},[t]),vu=t=>{let{items:e}=t,{length:o}=e;if(o===1){let[{balance:n="",chainData:r}]=e;if(K(r)&&r.standard==="SemiFungible"){let i=parseInt(n,10);return isNaN(i)?1:i}}return o};s();a();var Iu=x(P()),Lh=t=>(0,Iu.useMemo)(()=>t.filter(e=>e?.media?.type==="image"),[t]);s();a();var Au=x(P());var Vh=(t,e)=>(0,Au.useMemo)(()=>{if(!t||!e)return;let o=t.chain.id,n=e.explorers[o]??Es.get(o).defaultExplorer,r,i;if(K(t.chainData))i="address",r=t.chainData.mint;else if(Te(t.chainData))if(t.chainData.contract)t.chainData.id?(i="nft",r=[t.chainData.contract,t.chainData.id]):(i="token",r=t.chainData.contract);else return;else if(Ne(t.chainData))if(Bt(t.chainData)){let{hash:c,index:d}=t.chainData.utxoDetails;i="transaction",r=`${c}#flow=&vout=${d}`}else return{name:"Ordinals",url:`https://ordinals.com/inscription/${t.chainData.firstCreatedInscriptionId}`};else if(Tn(t.chainData))i="nft",r=t.chainData.objectId??"";else throw new Error(`Unhandled collectible explorer for chain id: ${t.chain.id}`);if(!r)return;let l=ks({networkID:o,endpoint:i,explorerType:n,param:r});if(l)return{name:Ps[n],url:l}},[t,e]);s();a();var Eu=x(P()),_h=t=>(0,Eu.useMemo)(()=>{let e=new Set;return t.filter(o=>{if(!o?.media?.image?.url)return!1;let{url:n}=o.media.image;return e.has(n)?!1:(e.add(n),!0)})},[t]);s();a();s();a();function Pu(t,e,o){let n="...",r=e+o+n.length;if(t.length<=r)return t;let i=t.substring(0,e),l=t.substring(t.length-o);return`${i}${n}${l}`}var ku=x(P());var jh=t=>{let{t:e}=Y();return(0,ku.useMemo)(()=>{let n=[];if(!t)return;let r=t.chainData;if(Ne(r)){let{outputValue:i,satNumber:l,satName:c,inscriptionId:d,inscriptionNumber:p,protocolName:m,createdAt:h,utxoDetails:g}=r,y=e(d?"collectibleDetailOrdinalInfo":"collectibleDetailRareSatsInfo"),C;return i?C=parseFloat(i).toLocaleString("en-US"):g&&(C=g.value.toLocaleString("en-US")),C&&n.push({topLeft:e("collectibleDetailSatsInUtxo"),topRight:e("collectibleDetailSatsInUtxoValue",{satsInUtxo:C})??void 0}),l&&n.push({topLeft:e("collectibleDetailSatNumber"),topRight:l}),c&&n.push({topLeft:e("collectibleDetailSatName"),topRight:c}),d&&n.push({topLeft:e("collectibleDetailInscriptionId"),topRight:Pu(d,5,3)}),p&&n.push({topLeft:e("collectibleDetailInscriptionNumber"),topRight:p}),m&&n.push({topLeft:e("collectibleDetailStandard"),topRight:m?.toUpperCase()}),h&&n.push({topLeft:e("collectibleDetailCreated"),topRight:Fh(new Date(h))}),{label:y,items:n.filter(fa)}}},[t,e])};function Fh(t){let e=t.toLocaleDateString(void 0,{month:"numeric",day:"numeric",year:"numeric"}),o=t.toLocaleTimeString();return`${e} ${o}`}s();a();var Ou=x(P()),Wt=()=>{},Uu=new Map([["send",1],["list",2],["pin",3],["unpin",4],["share",5],["setAsAvatar",6],["saveToLibrary",7],["hide",8],["reportAsSpam",9],["reportAsNotSpam",10],["burnToken",11],["viewOnExplorer",12]]);function $h(t){let{amountToBurn:e=0,explorerName:o,isBurnable:n,isHidden:r,isPinned:i,isSpam:l,onBurnToken:c,onReportNotSpam:d,onReportSpam:p,onSaveToLibrary:m,onSend:h,onSetAsAvatar:g,onToggleHide:y,onTogglePin:C,onViewOnExplorer:S,shortcuts:v,shouldDisplaySend:O,shouldDisplayShortcuts:V}=t,{t:I}=Y();return(0,Ou.useMemo)(()=>{let J=[];if(O&&J.push({text:I("commandSend"),type:"send",onClick:h??Wt}),m&&J.push({text:I("assetDetailSavePhoto"),singleWordAltText:I("commandSave"),type:"saveToLibrary",menuOnly:!0,onClick:m??Wt}),g&&!l&&J.push({text:I("collectibleDetailSetAsAvatar"),singleWordAltText:I("collectibleDetailSetAsAvatarSingleWorkAlt"),type:"setAsAvatar",menuOnly:!0,onClick:g??Wt}),C){let te=I(i?"assetDetailUnpinCollection":"assetDetailPinCollection"),Se=I(i?"commandUnpin":"commandPin"),ie=i?"unpin":"pin";J.push({text:te,singleWordAltText:Se,type:ie,menuOnly:!0,onClick:C??Wt})}if(y){let te=I(r?"assetDetailUnhideCollection":"assetDetailHideCollection"),Se=I(r?"commandUnhide":"commandHide"),ie=r?"unhide":"hide";J.push({text:te,singleWordAltText:Se,type:ie,menuOnly:!0,onClick:y??Wt})}if(d){let te=I("collectiblesReportAsNotSpam");J.push({text:te,type:"reportAsNotSpam",singleWordAltText:I("collectiblesReportNotSpam"),menuOnly:!0,isDestructive:!0,onClick:d})}if(p){let te=I("collectiblesReportAsSpam");J.push({text:te,type:"reportAsSpam",singleWordAltText:I("commandReport"),menuOnly:!0,isDestructive:!0,onClick:p})}if(n){let te=I(e===1?"collectibleBurnTitleWithCount_one":"collectibleBurnTitleWithCount_other");J.push({text:te,singleWordAltText:I("commandBurn"),type:"burnToken",menuOnly:!0,isDestructive:!0,onClick:c??Wt})}return!!S&&!!o&&J.push({text:I("assetDetailViewOnExplorer",{explorer:o}),singleWordAltText:I("commandView"),type:"viewOnExplorer",menuOnly:!0,onClick:S??Wt}),J.sort((te,Se)=>(Uu.get(te.type)??100)-(Uu.get(Se.type)??100)),{actions:wa(J,4),shortcuts:V?v:[]}},[e,o,n,r,i,l,c,d,p,m,h,g,y,C,S,v,O,V,I])}s();a();var zh=x(P());var j0={type:"empty",data:null},F0={type:"collectibles-trimmed",data:null};s();a();export{we as a,Ea as b,id as c,Qp as d,_a as e,K as f,Te as g,Ne as h,Bt as i,Yp as j,uh as k,gt as l,nl as m,pd as n,md as o,fd as p,gd as q,Na as r,Sd as s,wd as t,vd as u,bd as v,yd as w,Nr as x,La as y,Ud as z,Co as A,Ap as B,Ep as C,Dn as D,Qr as E,ph as F,fh as G,ou as H,bh as I,gh as J,Ch as K,Sh as L,Th as M,hr as N,op as O,cp as P,dp as Q,wp as R,xp as S,kp as T,Bp as U,Ph as V,gl as W,Np as X,oi as Y,kh as Z,Hp as _,Gp as $,Dh as aa,Rh as ba,Nh as ca,Lh as da,Vh as ea,_h as fa,jh as ga,$h as ha,qp as ia};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-JHOWMCAF.js.map
