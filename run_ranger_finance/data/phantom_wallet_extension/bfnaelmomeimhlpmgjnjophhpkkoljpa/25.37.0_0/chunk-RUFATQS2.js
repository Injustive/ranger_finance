import{a as ot}from"./chunk-JZ2VJH3Q.js";import{c as Z,d as tt}from"./chunk-BZPLXNUN.js";import{e as J,f as z}from"./chunk-VFRN3JHE.js";import{a as p}from"./chunk-445JQBFV.js";import{a as D,qc as Q}from"./chunk-G7SUPDIB.js";import{b as N,c as P}from"./chunk-E5TK5K23.js";import{Aa as B,Ia as j,Oa as H,Pa as W,b as m,g as V,ua as M,va as U,wa as $,ya as c}from"./chunk-TZQSBP6H.js";import{b as d}from"./chunk-GKHH5GNI.js";import{z as K}from"./chunk-YTR3MBED.js";import{e as Y}from"./chunk-JRXOTVYG.js";import{a as X,g as q}from"./chunk-CDGG3G3C.js";import{a as F,c as x}from"./chunk-VQ7QS3TU.js";import{W as v,d as C,ka as G}from"./chunk-XO3ZXIMS.js";import{M as w,h as R,i as h,mb as I}from"./chunk-LN2IIXED.js";import{Fd as O,Nc as y,Xc as b,qd as L}from"./chunk-ZKZ45RUP.js";import{S as k,c as lt,v as _}from"./chunk-HUAJDUGD.js";import{f as gt,h as a,n as s}from"./chunk-SXSSBWAU.js";a();s();var ut={...h,...O,...P,...Y,...K},et=b.getInstance({storage:ot,keyRegistry:ut,authRepository:p,queryClient:Q,isOnboardingDone:z});p.subscribe("user",async()=>{et.hydrateIfNeeded()});p.subscribe("loggedOut",async()=>{et.clear()});a();s();a();s();a();s();var ft=m(e=>{let t=Object.fromEntries(Object.entries(e(c).data?.updates??{}).map(([o,r])=>[o,{name:r.name,quantity:r.totalQuantity/10**r.decimals,timestamp:r.timestamp}]));return{errors:e(Z),walletCaip19:e(M),totalValue:e(W),portfolioValueStatus:e(H).status,balanceUpdatesStatus:e(c).status,balancesStatus:e(U).status,balancesFromUnixTimestamp:Math.floor(e($)/1e3),updatesFromUnixTimestamp:(e(c).data?.lastTimestamp??0)/1e6,updates:t,hasNextPage:e(B),fungibleTokens:e(j).map(o=>o.encodedCaip19)}}),rt=ft;var at=m(e=>({...e(rt),visibleTokens:e(tt).map(t=>t.encodedCaip19)}));var n=gt(lt());a();s();var l=class{async get(t){let o=null;try{if(o=self.localStorage.getItem(t),typeof o!="string")return null;try{return JSON.parse(o)}catch{return console.warn(`[DeprecatedLocalStorage.get] Error parsing JSON for key "${t}"`),o}}catch(r){let i=`[DeprecatedLocalStorage.get] Error getting key (${t}): ${r}`;throw new Error(i)}}async getAll(t){try{let o={};t=t||Object.keys(self.localStorage);for(let r of t)o[r]=await this.get(r);return o}catch(o){let r=`[DeprecatedLocalStorage.getAll] Error getting key(s) (${t}): ${o}`;throw new Error(r)}}async remove(t){let o=`[DeprecatedLocalStorage.remove] Error removing key(s) (${t}): Method not implemented`;throw new Error(o)}async set(t,o){let r=`[DeprecatedLocalStorage.set] Error setting key (${t}): Method not implemented`;throw new Error(r)}async setAll(t){let r=`[DeprecatedLocalStorage.setAll] Error setting key (${Object.keys(t)}): Method not implemented`;throw new Error(r)}subscribe(t){return console.warn("[DeprecatedLocalStorage.subscribe] Method not implemented"),()=>{}}async update(t){let o=`[DeprecatedLocalStorage.update] Error updating key(s) (${t}): Method not implemented`;throw new Error(o)}};var St=new F,dt=new l,Et=[...R,...D,N,w,"i18nextLng"],_o=()=>{let{data:e,isFetching:t}=I(),{data:o,isFetching:r}=G(),{data:i,isFetching:st}=L([{key:"Local Storage",storage:St},{key:"Deprecated Local Storage",storage:dt}],Et),{data:E}=v(),T=J(),[A]=V(at),u=(0,n.useCallback)(async()=>{let{version:f}=chrome.runtime.getManifest(),S=await x.getDeviceId(),pt=await T();return{"App Version":f,"Platform Information":X,"Display Language":C(k.language),"Phantom Auth":pt,"Device Id":S,Portfolio:A,"Auto Lock Timer(ms)":E,...e,...o,...i}},[A,e,o,i,T,E]),nt=t||r||st,it=(0,n.useCallback)(async f=>{f?.preventDefault();let S=await u();await y.downloadLog(S)},[u]),mt=(0,n.useCallback)(()=>{d({url:q})},[]),ct=(0,n.useCallback)(()=>{d({url:_})},[]);return{appState:u,isFetching:nt,goCreateTicket:mt,goSupportDesk:ct,downloadLogs:it}};export{_o as a,et as b};
//# sourceMappingURL=chunk-RUFATQS2.js.map
